(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{101:function(t,e){t.exports=_vendor_cfd795},1162:function(t,e,i){"use strict";var n=i(11),a=i(1163),s=i(62),o=i(59),c=i(85),r=i(222);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=s(this),i=o(e),n=r(e,0);return n.length=a(n,e,e,i,0,void 0===t?1:c(t)),n}})},1163:function(t,e,i){"use strict";var n=i(140),a=i(59),s=i(306),o=i(119),c=function(t,e,i,r,d,l,p,u){for(var m,h,f=d,v=0,g=!!p&&o(p,u);v<r;)v in i&&(m=g?g(i[v],v,e):i[v],l>0&&n(m)?(h=a(m),f=c(t,e,m,h,f,l-1)-1):(s(f+1),t[f]=m),f++),v++;return f};t.exports=c},1164:function(t,e,i){i(155)("flat")},1170:function(t,e,i){},1171:function(t,e){t.exports='\n    <div class="imlp-app-container imlp-app-container--{{pageInfo.app}} {{responsive ? \'imlp-app-container--responsive\' : \'\'}}">\n        <ui-toast></ui-toast>\n        <ui-header hospital="{{header}}"></ui-header>\n        <div class="divider"></div>\n        <div class="main">\n            <div class="main-left">\n                <ui-navigation></ui-navigation>\n                <ui-qrcode></ui-qrcode>\n            </div>\n            <div class="main-middle">\n                <ui-chatview emptyRefKey="{{emptyRefKey}}" typeboxRef="{{typeboxRefKey}}" fixedRefPrefix="{{fixedRefPrefix}}" s-ref="{{chatviewRefKey}}"></ui-chatview>\n                <ui-sugslider></ui-sugslider>\n                <div class="divider"></div>\n                <ui-typebox s-ref="{{typeboxRefKey}}"></ui-typebox>\n            </div>\n            <div class="main-right">\n                <ui-recommend data="{{sider.content}}"></ui-recommend>\n                <ui-contact></ui-contact>\n                <ui-qrcode s-if="{{pageInfo.app === \'standard\'}}"></ui-qrcode>\n                <ui-iframe s-if="iframe && iframe.on" s-ref="{{iframeRefKey}}"></ui-iframe>\n            </div>\n        </div>\n        <ui-mask></ui-mask>\n        <ui-widget-preview s-if="preview && preview.on && preview.src" data="{{preview}}">\n        </ui-widget-preview>\n    </div>\n'},1172:function(t,e,i){},1173:function(t,e){t.exports='\n    <div class="pc-imlp-component-header">\n        <div class="pc-imlp-component-header-left">\n            <div class="pc-imlp-component-header-hospital {{hasScore ? \'pc-header-hospital-hasScore\' : \'pc-header-hospital-noScore\'}}">\n                <div s-if="hospital.image.src" class="header-hospital-logo">\n                    <img src="{{hospital.image.src}}">\n                </div>\n                <div class="header-hospital-content">\n                    <template s-for="item, index in hospital.info">\n                        <div s-if="item.type == \'subtitle\'" class="header-hospital-title">{{item.text}}</div>\n                        <div s-if="item.type == \'rank\'" class="header-hospital-score">\n                            <template>\n                                <widget-score data="{{item}}"></widget-score>\n                            </template>\n                        </div>\n                    </template>\n                </div>\n            </div>\n        </div>\n    </div>\n'},1184:function(t,e,i){},1185:function(t,e){t.exports='\n    <div class="imlp-widget-toast-group">\n        <template s-for="item in list">\n            <div class="imlp-widget-toast {{item.nowrap ? \'imlp-widget-toast--nowrap\' : \'\'}}">\n                <div class="imlp-widget-toast-icon" s-if="item.icon"><i class="c-icon">{{item.icon |raw}}</i></div>\n                {{item.text|raw}}\n            </div>\n        </template>\n    </div>\n'},1186:function(t,e,i){},1187:function(t,e){t.exports='\n    <div class="imlp-component-iframe-box {{loaded ? \'imlp-component-iframe-box--loaded\' : \'\'}}">\n        <div class="imlp-component-iframe-header">\n            <div class="imlp-component-iframe-title">\n                内容详情\n                <span class="imlp-component-iframe-header-close" on-click="hideIframe($event)">\n                </span>\n            </div>\n            <div class="imlp-component-iframe-detail">\n                <span class="notice"></span>\n                页面为嵌入式移动端页面，操作需在移动端才能进行\n            </div>\n        </div>\n        <div class="imlp-component-iframe-fix-container">\n            <iframe s-ref="imlp-component-iframe" class="imlp-component-iframe\n                {{iframe.on ? \'imlp-component-iframe-show\' : \'\'}}" src="{{iframe.src}}" frameborder="0" allowfullscreen>\n            </iframe>\n        </div>\n        <div class="imlp-component-iframe-mask" on-click="showIframeMask($event)"></div>\n        <div s-if="{{iframeMask}}" class="imlp-component-iframe-mask-layer">\n            <div class="imlp-component-iframe-mask-qrcode" s-if="{{iframeMask}}">\n                <div class="imlp-component-iframe-mask-qrcode-title">\n                    扫描二维码进行操作\n                    <span class="imlp-component-iframe-mask-qrcode-close" on-click="hideIframeMask($event)"></span>\n                </div>\n                <div class="imlp-component-iframe-mask-qrcode-desc">您发起的功能服务需要在移动端才能生效需在手机中进行操作，扫码进入移动端</div>\n                <div class="imlp-component-iframe-mask-qrcode-img">\n                    <widgets-ui-qrcode type="url" value="{{iframe.src}}" w="160" h="160">\n                    </widgets-ui-qrcode>\n                </div>\n            </div>\n        </div>\n    </div>\n'},1188:function(t,e,i){},1189:function(t,e){t.exports='\n    <div class="imlp-widget-qrcode">\n        <div s-ref="{{qrcodeElemRef}}"></div>\n    </div>\n'},1190:function(t,e,i){},1191:function(t,e){t.exports='\n    <div s-if="data.src && data.src" class="imlp-widget-imagepreview {{computed ? \'imlp-widget-imagepreview--computed\' : \'\'}}" on-click="hide">\n        <img s-ref="{{refKey}}" style="width:{{width}}px;height:{{height}}px" class="imlp-widget-imagepreivew-image" src="{{data.src}}" on-load="loadHandler($event)">\n    </div>\n'},1192:function(t,e,i){},1193:function(t,e){t.exports='\n    <div class="pc-imlp-component-navigation">\n        <div class="pc-imlp-component-navigation-title">信息栏导航</div>\n        <ul class="pc-imlp-component-navigation-list">\n            <li s-for="item in asyncMenu" class="pc-imlp-component-navigation-item" on-click="operate($event, item)">\n                {{item.text}}\n            </li>\n        </ul>\n    </div>\n'},1194:function(t,e,i){},1195:function(t,e){t.exports='\n    <div class="imlp-component-qrcode">\n        <div s-if="pageInfo.app===\'standard\'" class="imlp-component-qrcode-header">\n            <span class="qrcode-header-label"></span>\n            <span class="qrcode-header-text">移动端沟通</span>\n        </div>\n        <div on-click="preview" class="imlp-component-qrcode-wrapper">\n            <div class="qrcode-img">\n                <widgets-ui-qrcode isImlp="1"></widgets-ui-qrcode>\n            </div>\n            <div class="qrcode-text">(点击可放大)<br>移动端沟通更安全</div>\n        </div>\n    </div>\n'},1196:function(t,e,i){},1197:function(t,e){t.exports='\n    <div class="pc-imlp-component-chatview {{hasSug ? \'pc-imlp-component-chatview--hasSug\' : \'\'}}">\n        <div class="pc-component-chatview-wrapper" style="min-height: {{minHeight}}" s-ref="{{wrapperRef}}">\n            <ui-declare data="{{notification}}"></ui-declare>\n\n            <template s-for="m, index in message">\n                <ui-chat-empty s-if="index == missMessage.index" index="{{index}}" s-ref="{{emptyRefKey}}"></ui-chat-empty>\n\n                <ui-chat-empty s-if="m.fixed" index="{{index}}" s-ref="{{fixedRefPrefix + \'-\' + index}}"></ui-chat-empty>\n\n                <ui-chat-wakeup s-if="m.type == \'wakeup\'" s-ref="{{\'pc-imlp-component-chatview-\' + index}}"></ui-chat-wakeup>\n\n                <ui-notification-card s-if="m.type == \'8000\'" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" content="{{m.content}}"></ui-notification-card>\n\n                <template s-if="m.type == \'leavetel\'">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-leavetel></ui-leavetel>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n                <template s-if="m.type == \'leaveword\'">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-leaveword></ui-leaveword>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n                <template s-if="m.type == \'1\' || m.type == \'text\'">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-chat-text text="{{m|highLight}}"></ui-chat-text>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n                <template s-if="m.type == \'8003\'">\n                    <ui-chat-base history="{{m.history}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" fullWidth="true" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-chat-leaveword-card content="{{m.content}}" msgid="{{m.msgid}}"></ui-chat-leaveword-card>\n                        </div>\n                    </ui-chat-base>\n                </template>\n                <template s-if="m.type == \'2\' || m.type == \'image\'">\n                    <ui-chat-image source="{{m.source}}" history="{{m.history}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" content="{{m.content}}" msgid="{{m.msgid}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}"></ui-chat-image>\n                </template>\n                <template s-if="m.type == \'P0003\' || m.type == \'P0006\'">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-tab-card source="{{m.source}}" history="{{m.history}}" type="{{m.type}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" content="{{m.content}}">\n                            </ui-tab-card>\n                        </div>\n                    </ui-chat-base>\n                </template>\n                <template s-if="\n                    m.type == \'P0001\' ||\n                    m.type == \'P0002\' ||\n                    m.type == \'P0004\' ||\n                    m.type == \'P0005\' ||\n                    m.type == \'P0007\' ||\n                    m.type == \'P0008\' ||\n                    m.type == \'P0009\' ||\n                    m.type == \'P0010\' ||\n                    m.type == \'P0011\' ||\n                    m.type == \'P0012\' ||\n                    m.type == \'P0013\' ||\n                    m.type == \'P0014\'\n                    ">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}" isRead="{{m.isRead}}" sendState="{{m.sendState}}" msgid="{{m.msgid}}">\n                        <div slot="bubble-inner">\n                            <ui-base-card ref="{{\'pc-imlp-component-chatview-\' + index}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" type="{{m.type}}" source="{{m.source}}" content="{{m.content}}">\n                            </ui-base-card>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n                <template s-if="m.name === \'standard\' && m.style">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}">\n                        <div slot="bubble-inner">\n                            <ui-standard-card ref="{{\'pc-imlp-component-chatview-\' + index}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" type="{{m.type}}" source="{{m.source}}" data="{{m}}">\n                            </ui-standard-card>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n                <template s-if="m.name === \'combined\' && m.style">\n                    <ui-chat-base s-ref="{{\'pc-imlp-component-chatview-\' + index}}" history="{{m.history}}" source="{{m.source}}" status="{{m.status}}" type="{{m.type}}">\n                        <div slot="bubble-inner">\n                            <ui-combined-card ref="{{\'pc-imlp-component-chatview-\' + index}}" s-ref="{{\'pc-imlp-component-chatview-\' + index}}" type="{{m.type}}" source="{{m.source}}" data="{{m}}">\n                            </ui-combined-card>\n                        </div>\n                    </ui-chat-base>\n                </template>\n\n            </template>\n        </div>\n    </div>\n'},1198:function(t,e,i){},1199:function(t,e){t.exports='\n    <div class="imlp-component-chatviewwakeup">\n        <div class="c-row">\n            <div class="c-span1"></div>\n            <div class="c-span10">\n                <div class="imlp-component-chatviewwakeup-content">\n                    您的对话将会同步至百度APP-"我的"-"私信"\n                </div>\n            </div>\n            <div class="c-span1"></div>\n        </div>\n    </div>\n'},1200:function(t,e,i){},1201:function(t,e){t.exports='\n    <div class="imlp-component-text">\n        {{text | emoji | raw}}\n    </div>\n'},1202:function(t,e,i){},1203:function(t,e){t.exports="\n    <div class=\"pc-chatviewbase pc-chatviewbase-{{source}}\n        {{chatIn ? 'chat-in' : 'chat-out'}}\n        {{(!cardShow && hasCard) ? 'pc-chatviewbase--hidden' : ''}}\">\n        <div class=\"pc-chatviewbase-avatar-container\">\n            <slot name=\"avatar\">\n                <div class=\"pc-chatviewbase-avatar\" style=\"{{chatIn ? 'background-image: url(' + savatar + ')' : 'background-image: url(' + uavatar + ')'}}; margin: {{chatIn ? '0 8px 0 30px' : '0 30px 0 8px'}}\">\n                </div>\n            </slot>\n        </div>\n        <div class=\"pc-chatviewbase-bubble-container {{type == '1' || type == 'text' ? 'pc-chatviewbase-bubble-container--text' : ''}}\">\n            <div class=\"{{type == 1 || type == 'text'? 'pc-chatviewbase-bubble' : ''}}\n                        {{chatIn ? 'left-chatviewbase-bubble' : 'right-chatviewbase-bubble'}}\">\n                <slot name=\"bubble-inner\"></slot>\n            </div>\n            <div s-if=\"source == 'user'\" class=\"pc-chatviewbase-resend-container\" on-click=\"handleResend\">\n                <div s-if=\"sendState === '1'\" class=\"c-icon pc-chatviewbase-resend-fail\">{{''|raw}}</div>\n                <div s-if=\"sendState === '2'\" class=\"pc-chatviewbase-resend-ing\"></div>\n            </div>\n        </div>\n        <div s-if=\"source === 'user' && isRead === '0'\" class=\"pc-chatviewbase-read pc-chatviewbase-read-done\">已读</div>\n    </div>\n"},1204:function(t,e,i){},1205:function(t,e){t.exports='\n    <div class="imlp-component-chatviewleaveword">\n        <div>{{content.title}}</div>\n        <template s-if="content.contactMeImList">\n            <div>\n                您可以\n                <template s-for="item in content.contactMeImList">\n                    <template s-if="item.type == \'tel\'">\n                        <a href="tel:{{item.value}}">电话咨询: {{item.text}}</a>\n                    </template>\n                    或\n                </template>\n                留下您的联系方式,我会尽快联系您。\n            </div>\n        </template>\n        <div class="c-gap-top-small">\n            <div class="c-flexbox imlp-component-chatviewleaveword_form">\n                <div class="imlp-component-chatviewleaveword_imselect">\n                    <select>\n                        <option value="phone">电话</option>\n                        <option value="wechat">微信</option>\n                        <option value="qq">QQ</option>\n                        <option value="email">邮箱</option>\n                    </select>\n                    <i s-if="isIOS" class="c-icon imlp-component-chatviewleavework_arrow" style="position: absolute;top: 0;right: 3px;">{{\'\'|raw}}</i>\n                </div>\n                <div class="imlp-component-chatviewleaveword_input">\n                    <input placeholder="请输入联系方式">\n                </div>\n            </div>\n            <a on-click="submit($event)" href="javascript:void(0)" class="c-gap-top-small c-blocka imlp-component-chatviewleaveword_submit">\n                提交\n            </a>\n        </div>\n    </div>\n'},1206:function(t,e,i){},1207:function(t,e){t.exports='\n    <div class="imlp-component-chatviewImage imlp-component-chatviewbase pc-chatviewbase-{{source}}\n                {{source == \'service\' || source == \'system\' ? \'chat-in\' : \'chat-out\'}}">\n        <div class="imlp-component-chatviewbase-avatar-container">\n            <slot name="avatar">\n                <div class="imlp-component-chatviewbase-avatar" style="background-image: url({{\n                        source == \'service\' ? savatar : uavatar\n                    }});margin: {{\n                        source == \'service\' ? \'0 8px 0 30px\' : \'0 30px 0 8px\'\n                    }}">\n                </div>\n            </slot>\n        </div>\n        <div s-if="!imageList[content.uuid].uuid && content.image_url" class="imlp-component-chatview-pic-readed-box" style="width:{{imageWidth}}px;height:{{imageHeight}}px;">\n            <img class="imlp-component-chatview-pic-readed" src="{{content.image_url}}" style="width:{{imageWidth}}px;height:{{imageHeight}}px" on-click="preview(content.image_url, \'url\')" on-error="loadHandler($event, false)" on-load="loadHandler($event, true)">\n            <div s-if="source === \'user\'" class="pc-chatviewbase-resend-container" on-click="handleStatus">\n                <div s-if="sendState === \'1\' || imageList[content.uuid].status === -1" class="c-icon pc-chatviewbase-resend-fail">{{\'\'|raw}}</div>\n                <div s-if="sendState === \'2\'" class="pc-chatviewbase-resend-ing"></div>\n            </div>\n        </div>\n        <div s-if="imageList[content.uuid].uuid" class="imlp-component-chatview-pic-out-box" style="width:{{outImageWidth}}px;height:{{outImageHeight}}px">\n            <img s-if="imageList[content.uuid].tempSrc" class="imlp-component-chatviewImage-pic" src="{{imageList[content.uuid].tempSrc}}" on-click="preview(imageList[content.uuid].tempSrc, \'tempSrc\')">\n            <div class="imlp-component-chatviewImage-loading\n              {{imageList[content.uuid].progress === 100 ? \'imlp-component-chatviewImage-loaded\' : \'\'}}">\n                <div class="imlp-component-chatviewImage-mask">\n                  <div class="imlp-component-chatviewImage-loading-wrap">\n                        <div class="imlp-component-chatviewImage-loading-right-part">\n                            <div class="imlp-component-chatviewImage-loading-right" style="{{(imageList[content.uuid].progress * 3.6) <= 180 ? \'transform:rotate(\'+(imageList[content.uuid].progress*3.6-180)+\'deg);\' : \'transform:none;\'}}"></div>\n                            <div class="imlp-component-chatviewImage-loading-r-shadow"></div>\n                        </div>\n                        <div class="imlp-component-chatviewImage-loading-left-part">\n                            <div class="imlp-component-chatviewImage-loading-left" style="{{(imageList[content.uuid].progress * 3.6) <= 180 ? \'background:#000;\' : \'background:#fff;transform:rotate(\'+ (imageList[content.uuid].progress*3.6-360)+\'deg);\'}}"></div>\n                            <div class="imlp-component-chatviewImage-loading-l-shadow"></div>\n                      </div>\n                      <span class="imlp-component-chatviewImage-loading-progress">{{imageList[content.uuid].progress + \'%\'}}</span>\n                    </div>\n                </div>\n            </div>\n            <div s-if="source === \'user\'" class="pc-chatviewbase-resend-container" on-click="handleStatus">\n                <div s-if="sendState === \'1\' || imageList[content.uuid].status === -1" class="c-icon pc-chatviewbase-resend-fail">{{\'\'|raw}}</div>\n                <div s-if="sendState === \'2\'" class="pc-chatviewbase-resend-ing"></div>\n            </div>\n        </div>\n        <div s-if="source === \'user\' && isRead === \'0\'" class="pc-chatviewbase-read pc-chatviewbase-read-done">已读</div>\n    </div>\n'},1208:function(t,e,i){},1209:function(t,e){t.exports='\n    <div class="imlp-chatview-empty"></div>\n'},1246:function(t,e,i){},1247:function(t,e){t.exports='\n    <div class="imlp-tabcard {{\'imlp-tabcard-\' + type}}">\n        <div class="imlp-tabcard-tabs">\n            <widget-tabs cardType="{{type}}" data="{{content.data}}"></widget-tabs>\n        </div>\n    </div>\n'},1248:function(t,e,i){},1249:function(t,e){t.exports='\n    <div class="imlp-widget-tabs">\n        <div class="imlp-widget-tabs-header">\n            <a href="javascript:void(0);" s-for="tab, index in data" on-click="change($event, index)" class="imlp-widget-tabs-header-item\n                {{active == index ? \'imlp-widget-tabs-header-item--actived\' : \'\'}}\n                {{index > 4 ? \'imlp-widget-tabs-header-item--hidden\' : \'\'}}">{{tab.text}}</a>\n        </div>\n        <div class="imlp-widget-tabs-content">\n            <div s-if="data[active] && data[active].type == \'card\'">\n                <ui-base-card type="{{cardType}}" content="{{detail}}"></ui-base-card>\n            </div>\n        </div>\n    </div>\n'},1250:function(t,e,i){},1251:function(t,e){t.exports="\n    <div class=\"imlp-notification  {{!visible ? '' : 'imlp-notification--show'}}\">\n        <template>\n            <widget-notification data=\"{{content}}\"></widget-notification>\n        </template>\n    </div>\n"},1252:function(t,e,i){},1253:function(t,e){t.exports='\n    <div class="pc-imlp-component-chatview-declare">\n        {{data.text ? data.text : \'咨询服务软件由百度商桥提供，以上内容均由商家提供。\'}}\n        <a class="pc-imlp-component-chatview-declare-link" on-click="showMask">\n            《须知》\n        </a>\n    </div>\n'},1254:function(t,e,i){},1255:function(t,e){t.exports='\n    <div class="pc-imlp-component-leaveword">\n        <div class="leaveword-invite">{{invitewords}}</div>\n        <div class="leaveword-content">\n            <div class="leaveword-item">\n                <span class="label">您的姓名：</span>\n                <input type="text" class="name-input" placeholder="请输入您的姓名">\n            </div>\n            <div class="leaveword-item">\n                <span class="label tel-input-label">手机号码：</span>\n                <input type="text" class="tel-input {{isError ? \'error\' : \'\'}}" placeholder="请输入您的电话号码" on-focus="clearError($event)">\n                <span s-if="{{isError}}" class="error-close" on-click="clearError($event)"></span>\n            </div>\n            <div s-if="{{isError}}\'" class="leaveword-item">\n                <span class="label"></span>\n                <span class="tel-notice">请输入正确的电话号码</span>\n            </div>\n            <div class="leaveword-item">\n                <span class="label textarea-label">留言内容：</span>\n                <textarea class="leaveword-textarea" placeholder="请输入您的留言"></textarea>\n            </div>\n            <div class="leaveword-item">\n                <span class="label submit-label"></span>\n                <button class="leaveword-submit" on-click="submit($event)">提交</button>\n            </div>\n        </div>\n    </div>\n'},1256:function(t,e,i){},1257:function(t,e){t.exports='\n    <div class="pc-imlp-component-leavetel">\n        <div class="leavetel-invite">请输入您的电话号码，稍后将立即给您回电，通话免费。</div>\n        <div class="leavetel-content">\n            <input class="leavetel-input {{isError ? \'error\' : \'\'}}" placeholder="请输入你的电话号码" on-focus="clearError($event)">\n            <button class="leavetel-callback" type="button" on-click="submit($event)">免费回电</button>\n            <span s-if="{{isError}}" class="error-close" on-click="clearError($event)"></span>\n        </div>\n        <div s-if="{{isError}}\'" class="tel-notice">请输入正确的电话号码</div>\n    </div>\n'},1258:function(t,e,i){},1259:function(t,e){t.exports='\n    <div class="pc-imlp-component-typebox">\n        <div class="pc-imlp-component-typebox-tool">\n            <span class="typebox-tool-emoji" on-click="toggleBox(\'emoji\')">\n                <logo-emoji s-ref="{{emojiBtnRefKey}}"></logo-emoji>\n            </span>\n            <span class="typebox-tool-uploader">\n                <ui-uploader></ui-uploader>\n            </span>\n            <span class="typebox-tool-filter">\n                <input type="checkbox" s-ref="{{filterRefKey}}" on-click="updateFilterState">\n                <span class="filter-text">只看聊天</span>\n            </span>\n            <div s-if="bottombox == \'emoji\'" class="imlp-component-emoji-box">\n                <ui-typebox-emoji s-ref="{{emojiBoxRefKey}}"></ui-typebox-emoji>\n            </div>\n        </div>\n        <div class="pc-imlp-component-typebox-container">\n            <textarea contenteditable="true" class="imlp-component-typebox-input pc-imlp-component-typebox-input" s-ref="{{inputRefKey}}" on-click="toggleBox(\'input\')" on-focus="inputfocus" on-blur="inputBlur" on-input="updateText($event)" on-keydown="keydown" placeholder="{{placeholder}}"></textarea>\n        </div>\n        <div class="imlp-component-typebox-send-btn pc-imlp-component-typebox-send {{!text ? \'pc-imlp-component-typebox-send--disable\' : \'\'}}" on-click="send($event, true)">发送</div>\n        <template s-if="!iframe.on">\n            <ui-chat-miss-message-tip type="missMessTip" s-ref="imlp-chatview-miss-message-tip"></ui-chat-miss-message-tip>\n        </template>\n        <div s-if="sessionState == sessionClosedState" class="imlp-component-typebox-mask" on-click="openSessionClosedTip">\n        </div>\n        <div class="imlp-component-typebox-clearfix"></div>\n    </div>\n'},1260:function(t,e,i){},1261:function(t,e){t.exports='\n    <div class="imlp-component-typeboxemoji swipe" id="slider">\n        <div class="imlp-component-typeboxemoji-slide-row swipe-wrap">\n            <div class="imlp-component-typeboxemoji-slide">\n                <div class="imlp-component-typeboxemoji-slide-items">\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-1" data-text="[微笑]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-2" data-text="[调皮]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-3" data-text="[色]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-4" data-text="[睡]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-5" data-text="[疑问]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-6" data-text="[流泪]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-7" data-text="[汗]">\n                    </div>\n                </div>\n                <div class="imlp-component-typeboxemoji-slide-items">\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-8" data-text="[晕]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-9" data-text="[撇嘴]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-10" data-text="[惊恐]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-11" data-text="[尴尬]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-12" data-text="[害羞]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-13" data-text="[委屈]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-14" data-text="[大笑]">\n                    </div>\n                </div>\n                <div class="imlp-component-typeboxemoji-slide-items">\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-15" data-text="[大哭]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-16" data-text="[可爱]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-17" data-text="[再见]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-18" data-text="[偷笑]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-19" data-text="[乖]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-icon-20" data-text="[难过]">\n                    </div>\n                    <div class="imlp-component-typeboxemoji-slide-item imlp-component-typeboxemoji-slide-item-delete">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n'},1262:function(t,e,i){},1263:function(t,e){t.exports='\n    <div class="imlp-image-uploader">\n        <div s-if="supportFiles">\n            <label class="imlp-image-uploader-mask imlp-component-typebox-plus-box-upload-mask" on-click="triggerInput">\n                <logo-uploader></logo-uploader>\n            </label>\n            <input class="imlp-image-uploader-entry imlp-component-typebox-plus-box-upload-entry" type="file" enctype="multipart/form-data" accept="image/*" multiple="multiple" s-ref="uploadElem" on-change="handleInputChange">\n        </div>\n        <div s-if="!supportFiles">\n            <form s-ref="{{uploadFormRefKey}}" enctype="multipart/form-data">\n                <label class="imlp-image-uploader-mask imlp-component-typebox-plus-box-upload-mask" on-click="triggerInput">\n                    <logo-uploader></logo-uploader>\n                </label>\n                <input class="imlp-image-uploader-entry imlp-component-typebox-plus-box-upload-entry" type="file" s-ref="uploadElem" name="file" accept="image/*" on-change="formUpload">\n            </form>\n        </div>\n        <input type="file" class="imlp-image-uploader-input--hidden" s-ref="{{hiddenInputRefKey}}">\n    </div>\n'},1276:function(t,e,i){},1277:function(t,e){t.exports='\n    <div class="pc-imlp-component-recommend">\n        <template s-for="item, index in data">\n            <div class="pc-imlp-component-recommend-item">\n                <div class="pc-imlp-component-recommend-header">\n                    <div class="recommend-header-line"></div>\n                    <div class="recommend-header-title">\n                        {{item.content.header.left}}\n                    </div>\n                    <div s-if="item.content.header.right" class="recommend-header-btn" on-click="operate($event, item.content.header.right, \'\', true)">\n                        {{item.content.header.right.text}}\n                        <span class="recommend-header-more"></span>\n                    </div>\n                </div>\n                <div class="pc-imlp-component-recommend-container {{index !== data.length-1 ? \'recommend-container-bottom\' : \'\'}}">\n                    <template s-for="list, listIndex in item.content.list">\n                        <div s-if="list.name === \'buttonGroup\'" class="recommend-buttongroup">\n                            <template s-for="group, groupIndex in list.list">\n                                <a class="recommend-buttongroup-button" on-click="operate($event, group)"> {{group.text}} </a>\n                            </template>\n                        </div>\n                        <div s-if="list.name === \'detailBase\'" class="recommend-detailBase" on-click="operate($event, list.action)">\n                            <div class="recommend-detailBase-avatar">\n                                <img src="{{list.image.src}}">\n                            </div>\n                            <div class="recommend-detailBase-main">\n                                <template s-for="info,infoIndex in list.info">\n                                    <div s-if="info.type === \'subtitle\'" class="recommend-detailBase-main-subtitle">\n                                        {{info.text}}\n                                    </div>\n                                    <div s-if="info.type === \'tagText\'" class="recommend-detailBase-main-tagText">\n                                        <ui-text-ellipise-box s-ref="{{\'ellipise\' + infoIndex}}" ref="{{\'ellipise\' + infoIndex}}" display="true" data="{{info}}"></ui-text-ellipise-box>\n                                    </div>\n                                </template>\n                            </div>\n                        </div>\n                        <div s-if="list.name === \'lists\'" class="recommend-lists">\n                            <ul>\n                                <template s-for="item in list.data.content">\n                                    <li class="recommend-lists-item" on-click="operate($event, item.action, item.value)">\n                                        {{item.value}}\n                                    </li>\n                                </template>\n                            </ul>\n                        </div>\n                    </template>\n                </div>\n            </div>\n        </template>\n    </div>\n'},1278:function(t,e,i){},1279:function(t,e){t.exports='\n    <div class="pc-imlp-component-contact">\n        <div class="pc-imlp-component-contact-header">\n            <span class="contact-header-label"></span>\n            <span class="contact-header-text">联系我们</span>\n        </div>\n        <ul class="pc-imlp-component-contact-list"> \n            <li s-for="item, index in contacts" class="pc-imlp-component-contact-item" style="width: {{100/contacts.length}}%">\n                <a class="contact-item" on-click="operate($event, item.type)">\n                    <div class="contact-item-icon {{item.style}}"></div>\n                    <div class="contact-item-text">{{item.text}}</div>\n                </a>\n            </li>\n        </ul>\n    </div>\n'},1280:function(t,e,i){},1281:function(t,e){t.exports='\n    <div class="pc-imlp-component-mask {{show ? \'\': \'imlp-component-mask-none\'}}">\n        <div class="pc-imlp-component-mask-container">\n            <template s-if="child == \'declare\'">\n                <ui-declare>\n                </ui-declare>\n            </template>\n            <template s-if="child == \'qrcode\'">\n                <ui-qrcode data="{{data}}">\n                </ui-qrcode>\n            </template>\n            <template s-if="child == \'qrcode-scaled\'">\n                <ui-qrcode-scaled>\n                </ui-qrcode-scaled>\n            </template>\n            <template s-if="child == \'session-closure\'">\n                <ui-session-closure></ui-session-closure>\n            </template>\n            <template>\n                <ui-detention s-if="child == \'detention\'"></ui-detention>\n            </template>\n            <template>\n                <ui-captcha s-if="child == \'captcha\'"></ui-captcha>\n            </template>\n        </div>\n    </div>\n'},1282:function(t,e,i){},1283:function(t,e){t.exports='\n    <div class="imlp-component-maskdeclare">\n        <div class="imlp-component-maskdeclare-title">\n            须知\n            <span class="imlp-component-maskdeclare-close" on-click="toggle"></span>\n        </div>\n        <h5 class="imlp-component-maskdeclare-section">\n            页面须知：\n        </h5>\n        <div class="imlp-component-maskdeclare-content">\n            尊敬的用户您好，为便于您与商家进行线上沟通，请您注意以下事项：\n            <p>1.为节省您的时间、免收重复输入的困扰，您的搜索词将会在该页面上的输入框中展示，您可以自行选择是否向商家发送该信息，您也可以自行在输入框中修改该信息。若您确认发送，则代表您同意将该信息发送给提供咨询服务的商家；若您没有发送，则您的搜索词信息不会提供给商家。请您在发送之前仔细检查自己的输入信息，避免隐私泄露。</p>\n            <p>2.为了方便您后续回访查看与商家沟通的消息记录，当您使用手机百度咨询时，您的对话内容将会同步到手机百度APP-我的-私信 里面。</p>\n            <p>3.本站仅提供技术服务，无法追踪、核查您与商家的沟通内容，网友、商家言论仅代表其个人观点，不代表本站立场，请谨慎参阅，本站不承担由此引起的法律责任。</p>\n            <p>4.如果您咨询医疗相关问题，由于网络沟通场景无法使医生明确了解您的真实情况，医生仅能根据您的描述内容为您提供咨询建议，但任何关于疾病的网络建议都不能替代医生的面对面诊断，因此请您完成咨询后选择线下就医。为了能够让医生给您提供更准确的建议，请您在线上沟通时务必如实陈述，若因您虚假陈述导致的后果，均与医院、医生及本站无关。</p>\n            <p>5.如果您在线上沟通过程中遇到问题，请您反馈至以下邮箱：iimlp@baidu.com</p>\n        </div>\n        <h5 class="imlp-component-maskdeclare-section">\n            服务须知：\n        </h5>\n        <div class="imlp-component-maskdeclare-content">\n            本服务是由商家和第三方咨询软件向百度用户提供，其中，咨询服务是由{{imName}}提供，咨询内容均由{{name}}提供，商家对本服务信息内容、数据资料及其运营行为等的真实性、合法性及有效性承担全部责任。百度向商家和第三方咨询软件提供技术支持服务。如果用户提供数据给服务提供方，适用服务提供方隐私政策，请联系服务提供方索取信息。\n        </div>\n        <div class="imlp-component-maskdeclare-btn-wrapper">\n        <div class="imlp-component-maskdeclare-btn-verify" on-click="toggle">\n            知道了\n        </div>\n        </div>\n    </div>\n'},1284:function(t,e,i){},1285:function(t,e){t.exports='\n    <div class="imlp-component-maskqrcode">\n        <div class="imlp-component-maskqrcode-app">\n            百度APP/微信等扫码后拨打电话\n            <span class="imlp-component-maskqrcode-close" on-click="toggle"></span>\n        </div>\n        <div class="imlp-component-maskqrcode-customer">\n            客服电话：\n            <span class="imlp-component-maskqrcode-telnumber">{{phone}}</span>\n        </div>\n        <div class="imlp-component-maskqrcode-notice">温馨提示：将由专属客服接听电话为您服务</div>\n        <div class="imlp-component-maskqrcode-img">\n            <template>\n                <widgets-ui-qrcode type="tel" value="{{phone}}" w="160" h="160">\n                </widgets-ui-qrcode>\n            </template>\n        </div>\n    </div>\n'},1286:function(t,e,i){},1287:function(t,e){t.exports='\n    <div class="imlp-component-maskqrcode--scaled">\n        <span class="imlp-component-maskqrcode-close" on-click="toggle"></span>\n        <div class="imlp-component-maskqrcode-tip">移动端沟通更安全</div>\n        <div class="imlp-component-maskqrcode-pic">\n            <template>\n                <widgets-ui-qrcode w="260" h="260">\n                </widgets-ui-qrcode>\n            </template>\n        </div>\n    </div>\n'},1288:function(t,e,i){},1289:function(t,e){t.exports='\n    <div class="imlp-component-maskSessionClosure">\n        <div class="imlp-component-maskDetention-close" on-click="hide"></div>\n        <div class="imlp-component-maskSessionClosure-title">提示</div>\n        <div class="imlp-component-maskSessionClosure-content">\n            您好，由于您长时间未发言，页面已经中断您此次的访问。若您想继续访问，请刷新页面重新建立连接。\n        </div>\n        <div class="imlp-component-maskSessionClosure-buttons">\n            <span class="imlp-component-maskSessionClosure-button\n                imlp-component-maskSessionClosure-button--refresh" on-click="refresh">重新连接</span>\n            <span class="imlp-component-maskSessionClosure-button\n                imlp-component-maskSessionClosure-button--cancel" on-click="hide">取消</span>\n        </div>\n    </div>\n'},1290:function(t,e,i){},1291:function(t,e){t.exports='\n    <div class="imlp-component-maskDetention">\n        <div class="imlp-component-maskDetention-close" on-click="hide"></div>\n        <div class="imlp-component-maskDetention-title">提示</div>\n        <div class="imlp-component-maskDetention-content">\n            确定要离开当前咨询页吗？\n        </div>\n        <div class="imlp-component-maskDetention-buttons">\n            <div class="imlp-component-maskDetention-button\n            imlp-component-maskDetention-button--confirm" on-click="confirm">确定</div>\n            <div class="imlp-component-maskDetention-button\n            imlp-component-maskDetention-button--cancel" on-click="hide">取消</div>\n        </div>\n    </div>\n'},1292:function(t,e,i){},1293:function(t,e){t.exports='\n    <div class="imlp-component-maskCaptcha">\n        <widget-captcha></widget-captcha>\n    </div>\n'},1294:function(t,e,i){},1295:function(t,e){t.exports='\n    <div class="imlp-widget-captcha {{errMsg? \'imlp-widget-captcha--error\' : \'\'}}">\n        <div class="imlp-component-captcha-close" on-click="cancel"></div>\n        <div class="imlp-widget-captcha-notice">提示</div>\n        <div class="imlp-widget-captcha-title">抱歉,目前接待访客较多<br>需输入正确的验证码后方可联通客服</div>\n        <div class="imlp-widget-captcha-content">\n            <span class="imlp-widget-captcha-pic" on-click="getCaptcha">\n                <template s-if="base64">\n                    <img src="{{base64}}">\n                </template>\n                <template s-else>{{captcha | raw}}</template>\n            </span>\n            <span class="imlp-widget-captcha-equal">=</span>\n            <input s-ref="{{inputRef}}" class="imlp-widget-captcha-input" on-input="inputHandle($event)" on-keydown="keydown($event)" placeholder="请输入答案">\n        </div>\n        <div class="imlp-widget-captcha-errMsg">{{errMsg}}</div>\n        <div class="imlp-widget-captcha-buttons">\n            <div class="imlp-widget-captcha-button imlp-widget-captcha-button--confirm" on-click="confirm">确认</div>\n            <div class="imlp-widget-captcha-button imlp-widget-captcha-button--cancel" on-click="cancel">取消</div>\n        </div>\n    </div>\n'},133:function(t,e,i){var n=i(2);i(1188);var a=i(1189),s=i(542).default;t.exports=i(542),t.exports.default=n(s,a,[])},1382:function(t,e,i){"use strict";i.r(e);var n=i(75),a=i.n(n),s=i(7),o=i.n(s),c=(i(19),i(6),i(18),i(42),i(26),i(10),i(159),i(17),i(20),i(25),i(195),i(156),i(1162),i(1164),i(0)),r=(i(308),i(33)),d={},l=i(24),p=i.n(l),u=i(4),m=i.n(u),h=i(263),f=i.n(h),v=i(50),g=i.n(v),x=i(60),b=i.n(x),y=i(264),w=i.n(y),k=(i(65),i(8),i(61)),M=i(22),S=i(5),T=i(125),I=i.n(T),C=i(3),R=i(108),B=i(164);function E(t,e){t.on("disconnect",(function(t){"user"!==t.from&&(c.store.dispatch("updateSessionStatus",S.a.stateMap.closed),c.store.dispatch("setMask",{show:!0,childcomponent:"session-closure"}))})),t.on("message",(function(t){(t=M.a.formatMsgList(t)).forEach((function(t){c.store.dispatch("AddMessageToChatView",{name:t.name,log:t.log,style:t.style,type:t.content_type,source:t.source,content:t.content,msgid:t.message_id,msgtime:t.message_time,status:0,tag:t.tag,xhwake:t.xhwake,isCloseMsg:t.isCloseMsg,ext:t.ext||{}}),c.store.dispatch("sendServiceTipToChatView",t)}))})),t.on("readData",(function(t){c.store.dispatch("updateReadStatus",t)})),t.on("inviteMessage",(function(t){c.store.dispatch("AddMessageToChatView",t)})),e.on("sendFail",(function(t){c.store.dispatch("updateFailMessages",t),c.store.dispatch("updateSendStatus",Object.assign({},t,{sendState:"1"}))})),t.on("error",(function(t){var i=t.result,n=t.type,a=t.data;"connect"===n&&setTimeout((function(){c.store.dispatch("ConnectNet")}),1e3),"entrySite"===n&&c.store.dispatch("entrySiteHandle"),"taskbegin"===n&&(11===i.status?c.store.dispatch("antiBlock"):(c.store.dispatch("updateSessionStatus",S.a.stateMap.failed),c.store.dispatch("showLeaveWord"))),"send"===i.type&&(e.emit("sendFail",[a]),c.store.dispatch("logSdk",{type:"send_failed",message:i.data})),"antiCheck"===n&&e.emit("antiCheckResult",[i]),"checkAntiCaptcha"===n&&e.emit("checkCaptchaResult",[i])})),t.onInit((function(){t.getHistroy((function(t){e.emit("history",[t])}))})),t.on("card",(function(t){t.forEach((function(t){t=Object(R.a)(t),c.store.dispatch("AddMessageToChatView",{name:t.name,log:t.log,style:t.style,type:t.type,cid:t.cid,source:4005===t.type?t.source:"system",content:t.content,msgid:t.message_id,msgtime:(new Date).getTime(),status:0,tag:"card_async"})}))})),e.on("history",(function(t){var e=w()(t),i={user:0,service:0},n=b()(i);g()(e,(function(t){var e=t.source;f()(n,e)&&o()(i,e,m()(i,e)+1),c.store.dispatch("updateHistoryLenAction",i),"9"!==(t.content_type+"")[0]&&(M.a.formatImageMsg(t),c.store.dispatch("AddMessageToChatView",{name:t.name,log:t.log,style:t.style,type:t.content_type,source:t.source,content:t.content,contenttext:t.contenttext,msgid:t.message_id||t.msgid,msgtime:t.message_time,status:0,history:1}))}))})),t.on("send",(function(t){c.store.dispatch("updateshowMessageIds",{msgid:t.data.message_id}),c.store.dispatch("updateSendStatus",Object.assign({},t.data,{sendState:"0"}))})),t.on("taskbegin",(function(t){var e=t.ssid,i=t.status,n=t.awake,a=void 0===n?"0":n,s=t.shopid,o=t.aduserid,r=t.im_type,d=t.robot_status,l=t.artificial_status,u=0===parseInt(d,10),m=1===parseInt(l,10);c.store.dispatch("sendChatTip",{isRobot:u}),c.store.dispatch("updateRobot",u&&m),p()(s)||0===parseInt(s,10)||c.store.dispatch("updateShopid",s),c.store.dispatch("updateAduserid",o),c.store.dispatch("updateAwake",a),c.store.dispatch("NetTaskbegin",{ssid:e,status:i,imType:r}),c.store.dispatch("updateSsidAction",e),c.store.dispatch("updateImtype",r),c.store.dispatch("updateSessionStatus",S.a.stateMap.connected);var h=c.store.getState("feature");1===(a=parseInt(c.store.getState("awake"),10))&&h.custom_awake&&c.store.dispatch("sendWake")})),t.on("switchToManual",(function(t){c.store.dispatch("updateRobot",!t),c.store.dispatch("sendChatTip",{isRobot:!t,switchToManual:{status:t}})})),t.on("storgeUpdate",(function(t){c.store.dispatch("updateMsgFromStorage",t)})),t.on("entrySite",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.store.dispatch("entrySiteHandle",t)})),t.on("antiCheck",(function(t){e.emit("antiCheckResult",[t])})),t.on("checkAntiCaptcha",(function(t){e.emit("checkCaptchaResult",[t])})),t.on("antiCaptcha",(function(t){c.store.dispatch("antiCaptchaResult",t)})),e.on("antiCheckResult",(function(t){c.store.dispatch("antiCheckResult",t)})),e.on("checkCaptchaResult",(function(t){c.store.dispatch("checkCaptchaResult",t)})),t.on("recommend",(function(t){var e=t.status,i=t.suggestInfo,n=void 0===i?[]:i;0===e&&c.store.dispatch("updateSugReplies",n)}))}var j=function(){window.BcpSdk=new I.a(c.store.getState("terminal"));var t=new B.a;E(window.BcpSdk,t),k.a.init.apply(k.a,arguments)},D=i(30),A=i(56),H={};function P(){var t=c.store._dispatch;c.store._dispatch=function(e,i,n){t.call(c.store,e,i,n),function(t,e,i){r.a.logFromStore(t,e,i)}(c.store,e,i)}}H.init=function(){P(),c.store.actions.NetTaskbegin||c.store.addAction("NetTaskbegin",(function(t,e){var i=e.getState,n=e.dispatch,a=t.status;i("autoConnect"),i("tplName"),i("aiService"),0!==a&&2!==a||(2===a&&n("sendWaitInfo"),n("sendAutoMsg"),n("sendCachedMsg"),n("sendTrackBeforeConnect"))})),c.store.actions.AddMessageToChatView||c.store.addAction("AddMessageToChatView",(function(t,e){var i=e.getState,n=e.dispatch,a=t.history,s=a?"unshift":"push",o=i("session.total"),r=i("session.state")===S.a.stateMap.connected,d=M.a.isCloseMsg(t),l=i("session.hasMissKefuMsg"),p="kefu"===t.tag,u=i("fixedRefPrefix"),m=!1,h=o+1,f=i("fixed");if(i("rebound"),r||!d){var v=i("session.hasFirstKefuMsg");p&&!v&&n("UpdateHasFirstKefuMsg"),r||!p||l||(m=!0,n("UpdateHasMissKefuMsg"),setTimeout((function(){n("UpdateFixedRefs",u+"-"+o)}))),(!f&&"user"===t.source||f&&!a&&"user"===t.source||"system"===t.source)&&(n("decideIsNeedScrollToBottom",!0),n("updateFixedAction",!1));var g=i("isNeedScrollToBottom");g&&setTimeout((function(){n("ChatViewScrollToBottom")})),i("missMessage");var x={name:t.name,log:t.log,style:t.style,type:t.type,source:t.source,content:t.content,action:t.action,contenttext:A.a.xssFilter(t.contenttext),msgid:t.message_id||t.msgid,msgtime:t.msgtime,history:t.history,status:0,num:h,fixed:m,tag:t.tag},b=t.message_id||t.msgid;if(b&&c.store.dispatch("updateshowMessageIds",{msgid:b}),"user"===t.source){var y=t.history,w=(c.store.getState("session.chatCount"),c.store.getState("session.currentUserMsgCount")),k=c.store.getState("feature"),T=parseInt(c.store.getState("awake"),10);return c.store.getState("historyLen.user"),1===T&&k.custom_awake,!y&&(w+=1),x.seq=w,x.imid=c.store.getState("imid"),Object(D.builder)()[s]("message",x).apply("session.chatCount",(function(t){return t+1})).set("session.currentUserMsgCount",w).apply("session.total",(function(t){return t+1}))}if(!f&&!g&&"service"===t.source){var I=i("message").length;n("updateMissMessage",{on:!0,hasFirst:!0,index:I,number:i("missMessage.number")+1})}return Object(D.builder)()[s]("message",x).apply("session.total",(function(t){return t+1}))}})),c.store.actions.ChatAction||c.store.addAction("ChatAction",(function(t,e){e.getState,e.dispatch;var i={type:"onClick"},n=t.value;"card"===n.type&&n.content?i.data={type:"card",text:n.content.title||n.content.text||"",value:n.content.cid||n.content.value||""}:i.data=n,k.a.sendUserAction(i)}));var t={type:"pv",from:"imlp",content:performance&&performance.now?Math.round(performance.now()):-1,ext:c.store.getState("pageInfo"),url:encodeURIComponent(window.location.href)};r.a.log(t);c.store.getState("appid"),c.store.getState("tplName"),c.store.getState("autoConnect"),c.store.getState("rebound"),c.store.getState("wake");var e=c.store.getState("config")||{},i=("manual"===e.inviteType||"auto"===e.inviteType)&&e.inviteData||!1;c.store.dispatch("sendWelcome"),i&&c.store.dispatch("sendInvite",e.inviteData),c.store.dispatch("updateSuggestForPc")};var q=H,_=i(178),L=i(163),F=i(13),U=i(265),N=i(41),K=i(726),O=i.n(K),W=i(171),V=i(172);function $(t){if(t){Object(V.a)(t);var e=t.searchObj;t.wsid=F.a.createWsid(t.pvKey),t.session.state=S.a.defaultState,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a()(t,(function(e,i){o()(t,i,Object(R.a)(e))}))}(t.message),t.appid=t.appid||"",t.client=t.terminal||"PC",t.historyKey=(t.content_provider||[])[0],t.user_id=t.user_id||t.aduserid;var i=A.a.isPt();i&&o()(t,"x.pt",i);var n=t.feature,s=t.disables||[];s.length&&(t.feature=function(t,e){var i={};for(var n in e=e||[],t=t||{})t.hasOwnProperty(n)&&(i[n]=!(e.indexOf(n)>-1));return i}(n,s));var c=t.expParamsList;t.expParam=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return t.forEach((function(t){t.params.forEach((function(i){e["".concat(t.module_name,"_").concat(i.name)]=i.value}))})),e}(c),t.k=t.pvKey.slice(0,16),t.iv=t.pvKey.slice(16,32),t.sdk="sdk"===e.from||e.rebound,t.bfid=e&&e.bfid||"",t.fid=e&&e.fid||"",t.n=parseInt(N.a.rn(),10),t.rebound&&(t.cancelCard=!0,t.message=[]),t.originUrl=C.a.formatUrl(location.href,{},!0),function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){t.source="system",t.tag="card_sync"}))}(t.message),t.rebound&&(t.cancelCard=!0,t.message=[]);t.feature.baozhang;t.xyl=t.appid&&(0===t.appid.indexOf("xyl_ad")||0===t.appid.indexOf("xyl_cip")),t.showBaozhangInfo&&t.message.unshift(F.a.getBaozhang());var r=history.pushState&&t.feature.back_notice&&"feed_zxzj"!==t.appid&&(!t.smartprogram||t.needBackH5);t.needDetentionModal=r;var d=t.contactNumber;t.contactNumber=C.a.formatContactNumber(d),t.rebound=e.hasOwnProperty("rebound")&&e.rebound||!1;var l=t.message||[],p=l[0]||{};p.num=1,p.fixed=1,t.session.initMsg=l.length,t.session.total=l.length,t.fixedRefPrefix="imlp-chatview-fixed",t.fixed=t.rebound||l.length,t.isNeedScrollToBottom=!t.fixed,e.mockBcpserver&&(t.bcpserver=e.mockBcpserver,t.xhinfo.url=e.mockBcpserver+"/static/xcx/index.html"),e.hasOwnProperty("sdkdomain")&&(e.sdkdomain?t.sdkdomain=location.protocol+"//"+decodeURIComponent(e.sdkdomain):t.sdkdomain=location.protocol+"//"+location.host),t.historySeq=history.length,t.initTime=(new Date).getTime();var u,m=t.manual_connect_strategy;if(m&&"string"==typeof m&&(t.autoConnectSource={auto:!0,send:!0},t.autoConnectSource[m]=!0),t.sider)t.sider.content=(null===(u=t.sider.content)||void 0===u?void 0:u.list)||t.sider.content||[],t.sider.content.forEach((function(t){var e;((null===(e=t.content)||void 0===e?void 0:e.list)||[]).forEach((function(t){"lists"===t.name&&((t.data.content||[]).some((function(t){return Array.isArray(t)}))&&(t.data.content=t.data.content.flat()))}))}))}}function z(t){Object(W.a)(),$(t),function(t){c.store.raw=t}(t),function(t){r.a.init(t,d)}(t),r.a.logPageShow(),_.a.init(),q.init(),c.store.getState("review")||function(t){var e={im_type:t.im_type,imid:t.imid},i=C.a.getCipTrackInfo()||{},n=t.config||{};n.inviteType&&n.inviteData&&(e.inviteType=n.inviteType,e.inviteContent=n.inviteData),["level1","level2","level3","notifyIM"].forEach((function(i){var n=t[i];n&&(e[i]=n)}));var a={params:t.params,userid:t.user_id,cuserid:n.cuserid,localPageType:n.localPageType,shopId:n.shopId,merchantId:n.merchantId,wid:n.wid,spuId:n.spuId,productId:n.productId,user_id_type:t.user_id_type,aduserid:t.aduserid,xst:t.xst||"",abTest:t.abTest||"",autoConnect:t.autoConnect,transparent:t.transparent,appid:t.appid||"",pvKey:t.pvKey||"",pvkey:t.pvKey||"",shop_id:t.shopid||"",client:t.client,url:location.href,imid:t.imid,wsid:t.wsid,referrer:Object(L.a)(document.referrer),title:t.title,bfid:t.bfid,expParam:t.expParam||{}},s=C.a.getViewport();a.dpi="".concat(s.width,"x").concat(s.height),t.channel&&(a.channel=t.channel),t.imlpAccessId&&(a.imlpAccessId=t.imlpAccessId),i.cipUrl&&(a.cipUrl=i.cipUrl),i.cipText&&(a.cipText=i.cipText);var o={f:A.a.eIv(U.a.getFp()),historyKey:t.historyKey,isSaveHistory:!0,apiHost:window.location.origin||"",isOffline:"develop"===t.mode,javaOfflineHost:t.offlineHost||""};t.sdkdomain&&(o.host=t.sdkdomain),j({imParam:e,pageParam:a,options:o})}(t),(new O.a).attach(document.getElementById("app"))}i(345);var X=i(47);window.imlpapp=function(t){z(t)},Object(X.a)(z)},533:function(t,e,i){"use strict";i.r(e);i(79),i(6),i(8),i(17),i(10),i(12),i(35),i(37);var n=i(0),a=i(3),s=i(165),o=i(44),c=i(727),r=i.n(c),d=i(729),l=i.n(d),p=i(730),u=i.n(p),m=i(731),h=i.n(m),f=i(732),v=i.n(f),g=i(733),x=i.n(g),b=i(734),y=i.n(b),w=i(755),k=i.n(w),M=i(758),S=i.n(M),T=i(759),I=i.n(T),C=i(760),R=i.n(C),B=i(176),E=i.n(B),j=i(1);i(13);e.default=n.connect.san({HeaderOn:"switch.Header",NotificationOn:"switch.Notification",ChatViewOn:"switch.ChatView",TypeBoxOn:"switch.TypeBox",MaskOn:"switch.Mask",slideTags:"slideTags",appid:"appid",iframe:"iframe",preview:"preview",feature:"feature",fixedRefPrefix:"fixedRefPrefix",smartprogram:"smartprogram",needDetentionModal:"needDetentionModal",ucid:"aduserid",sider:"sider",header:"header",userid:"user_id",navigation:"navigation",pageInfo:"pageInfo"},{initTypeboxInfo:"initTypeboxInfo",setMask:"setMask",updateCardTrack:"updateUserTrack",updateHiddenMsg:"UpdateHiddenMsg",updateFixedAction:"updateFixedAction",updatePreview:"UpdatePreviewAction",inputFocus:"inputFocus",masktoggle:"MaskToggle",updateMsgFromStorage:"updateMsgFromStorage",send:"SendMessage",showmask:"setMask"})({components:{"ui-header":r.a,"ui-navigation":v.a,"ui-qrcode":x.a,"ui-chatview":y.a,"ui-typebox":k.a,"ui-recommend":S.a,"ui-contact":I.a,"ui-mask":R.a,"ui-toast":l.a,"ui-iframe":u.a,"ui-widget-preview":h.a,"ui-sugslider":E.a},initData:function(){return{emptyRefKey:"imlp-chatview-empty",chatviewRefKey:"imlp-chatview",iframeRefKey:"imlp-chatview-iframe",typeboxRefKey:"imlp-component-typebox-type-zone",layoutCls:"layout-ready",minWidth:1280}},attached:function(){this.renderViewPort(),this.data.get("needDetentionModal")&&this.bindPopStateEvent(),this.initEvents()},initEvents:function(){document.addEventListener("click",this.clickHandler.bind(this),!1)},clickHandler:function(t){var e=this.data.get("typeboxRefKey"),i=this.ref(e),n=i.getEmojiBoxComp(),s=i.getEmojiBtnElem();n&&(a.a.contains(n.el,t.target)||t.target===s||i.hideEmoji())},renderViewPort:function(){a.a.getViewport().width,this.data.get("minWidth")},chatActionHandler:function(t){var e=t.value.value,i=t.value.type||"",s=e.type||"";switch(i){case"toast":n.store.dispatch("ShowToast",e);break;case"leaveWord":n.store.dispatch("LeaveWord",e);break;default:n.store.dispatch("ChatAction",t.value)}var o=e.actionType||"",c=e.content||e.value||"";if("async"===o)n.store.dispatch("getAsyncCard",{cid:e.value||"",mat:e.mat||{},ucid:this.data.get("ucid")});else if("sync"===o){var r={type:"syncCard",value:e.value};n.store.dispatch("CardLink",r)}else switch(s){case"url":var d=c.url||c;this.openUrl(d);break;case"tel":this.actions.showmask({show:!0,childcomponent:"qrcode",data:{phone:e.value}});break;case"card":n.store.dispatch("CardLink",t.value);break;case"iframe":n.store.dispatch("IframeAction",{on:!0,src:a.a.formatUrl(c,{showpageinpc:1})});break;case"client_msg":this.actions.send({source:"user",type:j.e.TEXT,content:c,trigger:"sug",sourceTag:"sugRecommend"});break;case"sugQa":var l=e.text||"";this.makeSugQa(l,c)}},openUrl:function(t){if(t){var e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank"),e.click(),e=null}},makeSugQa:function(t,e){this.actions.send({source:"user",type:j.e.TEXT,content:t,trigger:"sug",sourceTag:"sugRecommend"}),"[object Object]"===Object.prototype.toString.call(e)&&"card"===e.type&&e.value&&n.store.dispatch("getAsyncCard",{mat:JSON.stringify(e.value),ucid:this.data.get("ucid"),xst:this.data.get("xst")}),e&&"[object String]"===Object.prototype.toString.call(e)&&setTimeout((function(){n.store.dispatch("AddMessageToChatView",{source:"service",type:j.e.TEXT,content:e,trigger:"sug",sourceTag:"sugRecommend",msgtime:(new Date).getTime()})}),300)},getTrackHistory:function(t){t.cardType;return t.history},bindPopStateEvent:function(){var t=this;function e(){var t="#back"+(new Date).getTime(),e={title:"",url:t};window.history.pushState(e,"",t)}(location.href.indexOf("#back")<0||location.href.indexOf("cdata=")>-1)&&e(),setTimeout((function(){window.addEventListener("hashchange",(function(i){var n=t.data.get("preview"),a=t.data.get("iframe");if(a&&a.on)e(),t.hideIframe();else if(n&&n.on)e(),t.hidePreviewImage();else{i.oldURL.replace(/^.+(?=\/\/)/,"").indexOf("#back")&&t.actions.setMask({show:!0,childcomponent:"detention"})}}),!1)}),300)},hideIframe:function(){var t=this.ref(this.data.get("iframeRefKey"));t&&t.hideIframe&&t.hideIframe()},hidePreviewImage:function(){this.actions.updatePreview({src:"",on:!1})},updateHistory:function(){var t=[n.store.getState("channel"),n.store.getState("level1"),n.store.getState("level2"),n.store.getState("level3"),n.store.getState("user_id"),n.store.getState("im_type"),n.store.getState("ssid"),n.store.getState("appid")].join("__"),e={cdata:a.a.base64Encode(t)},i=a.a.formatUrl(location.href,e);i&&history.replaceState(null,null,i)},messages:{inputFocus:function(t){t=t||{};var e=this.ref(this.data.get("typeboxRefKey"));e&&e.focus&&e.focus();var i=t.value&&t.value.msg,n=t.value&&t.value.tag;i&&e&&e.renderInput&&e.renderInput(t.value.msg,n),this.actions.inputFocus(t.value)},scrollToMessage:function(t){var e=this.data.get("emptyRefKey"),i=t.value||e,n=this.ref(this.data.get("chatviewRefKey")),a=n&&n.ref(i);if(a){var s=a.getDistanceToTop();n.el.scrollTop+=s}},scrollHandle:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ref(this.data.get("chatviewRefKey"));e&&e.scrollHandle&&e.scrollHandle(t)},setTypeboxInfo:function(){var t=this.ref(this.data.get("typeboxRefKey")),e=t&&t.el,i=e&&e.getBoundingClientRect();this.actions.initTypeboxInfo(i)},"chat-action":function(t){this.chatActionHandler(t)},operate:function(t){var e=t.value,i=e.history,n=e.item,a=e.type,c=e.parent;i&&(i=s.a.getTrackHistory({item:n,history:i,cardType:n&&n.mat&&n.mat.cardType,parent:c}),o.a.trackHandle(i,n)),this.chatActionHandler({value:{type:a,value:n}})},"hidden-toolMenu":function(){this.actions.setMask({show:!1})},"hide-iframe":function(){this.hideIframe()},"hidden-msg":function(){this.actions.updateHiddenMsg()},"cancel-fixed":function(){this.actions.updateFixedAction(!1)},"update-history":function(){history.replaceState&&this.updateHistory()},computeMinHeight:function(t){var e=(t.value||{}).first;this.ref(this.data.get("chatviewRefKey")).computeMinHeight(e)},preview:function(t){t.value&&this.actions.updatePreview({on:!0,src:t.value})}}})},534:function(t,e,i){"use strict";i.r(e);i(98);var n=i(0),a=i(266),s=i.n(a),o=i(268),c=i.n(o);e.default=n.connect.san({},{})({initData:function(){return{hasScore:!1}},components:{"widget-detailbase":s.a,"widget-score":c.a},messages:{broadScoreInfo:function(){this.data.set("hasScore",!0)}}})},540:function(t,e,i){"use strict";i.r(e);i(8);var n=i(0);e.default=n.connect.san({},{})({initData:function(){return{list:[]}},attached:function(){var t=this,e="ShowToast";n.store.actions.ShowToast||n.store.addAction(e,(function(e,i){i.getState,i.dispatch;setTimeout((function(){t.data.pop("list")}),2400),t.data.unshift("list",e)}))}})},541:function(t,e,i){"use strict";i.r(e);i(10);var n=i(0),a=i(133),s=i.n(a),o=i(131);e.default=n.connect.san({iframe:"iframe"},{updateIframe:"IframeAction",setMask:"setMask"})({components:{"widgets-ui-qrcode":s.a},initData:function(){return{iframeMask:!1}},attached:function(){this.initMessageListener(),this.initIframeListener()},showIframeMask:function(t){t.preventDefault(),t.stopPropagation(),this.data.set("iframeMask",!0)},hideIframeMask:function(t){t.preventDefault(),t.stopPropagation(),this.data.set("iframeMask",!1)},hideIframe:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.actions.updateIframe({on:!1,src:this.data.get("iframe").src})},initMessageListener:function(){var t=this;window.addEventListener("message",(function(e){e.data.type,"openIM"===e.data.type&&(t.actions.setMask({}),t.hideIframe())}),!1)},initIframeListener:function(){var t=this;this.ref("imlp-component-iframe").onload=function(){try{var e=this.contentWindow.location,i=e.href,n=e.pathname;if(Object(o.a)(i)&&-1===n.indexOf("/imlp/static"))return void t.hideIframe()}catch(t){}t.data.set("loaded",!0),t.actions.updateIframe({on:!0,src:t.data.get("iframe").src})}}})},542:function(t,e,i){"use strict";i.r(e);i(17);var n=i(0),a=i(182),s=i.n(a),o=i(269);e.default=n.connect.san({},{})({initData:function(){return{qrcodeElemRef:"qrcode"+(new Date).getTime(),baseConf:{width:125,height:125},isImlp:0}},attached:function(){this.initQrCode()},initQrCode:function(){var t=this.data.get("value")||"",e=this.data.get("isImlp"),i=this.data.get("type")||"url",n=this.data.get("baseConf"),a=this.data.get("w")||n.width,c=this.data.get("h")||n.height,r=this.ref(this.data.get("qrcodeElemRef"));new s.a(r,{text:"",width:a,height:c,colorDark:"#000000",colorLight:"#ffffff",correctLevel:s.a.CorrectLevel.L}).makeCode(o.a.getQrcodeUrl({type:i,value:t,isImlp:e}))}})},543:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({preview:"preview"},{updatePreview:"UpdatePreviewAction"})({initData:function(){return{data:{src:"",on:!1},refKey:"imlp-widget-imagepreivew-image",width:"",height:"",computed:!1}},hide:function(t){t&&t.preventDefault();var e={src:"",on:!1};this.data.set("data",e),this.data.set("computed",!1),this.actions.updatePreview(e)},loadHandler:function(t){var e=document.body.getBoundingClientRect(),i=t.target||this.ref(this.data.get("refKey")),n=i.naturalWidth,a=i.naturalHeight,s=n/a,o=e.width,c=e.height,r=n,d=a;(n>o||a>c)&&(s>o/c?d=(r=o)/s:r=(d=c)*s),this.data.set("computed",!0),this.data.set("width",r),this.data.set("height",d)}})},544:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({asyncMenu:"asyncMenu"},{getMenuContext:"getMenuContext"})({attached:function(){this.actions.getMenuContext()},operate:function(t,e){t&&t.preventDefault();var i=e.text;this.dispatch("operate",{item:e,type:"slideTags",history:i})}})},545:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(133),s=i.n(a);e.default=n.connect.san({pageInfo:"pageInfo"},{setMask:"setMask"})({components:{"widgets-ui-qrcode":s.a},preview:function(){this.actions.setMask({show:!0,childcomponent:"qrcode-scaled"})}})},546:function(t,e,i){"use strict";i.r(e);var n=i(74),a=i.n(n),s=(i(8),i(79),i(19),i(6),i(20),i(159),i(12),i(35),i(0)),o=i(735),c=i.n(o),r=i(736),d=i.n(r),l=i(737),p=i.n(l),u=i(738),m=i.n(u),h=i(739),f=i.n(h),v=i(740),g=i.n(v),x=i(134),b=i.n(x),y=i(174),w=i.n(y),k=i(277),M=i.n(k),S=i(749),T=i.n(S),I=i(751),C=i.n(I),R=i(752),B=i.n(R),E=i(753),j=i.n(E),D=i(754),A=i.n(D),H=i(22);s.store.addAction("ChatViewScrollToBottom",(function(t,e){for(var i=e.getState,n=e.dispatch,a=document.querySelectorAll(".pc-imlp-component-chatview"),s=function(t){setTimeout((function(){a[t].scrollTop=a[t].scrollHeight,i("missMessage.number")>0&&n("updateMissMessage",{number:0,hasFirst:!1,index:-1})}),100)},o=0;o<a.length;o++)s(o)})),e.default=s.connect.san({message:"message",typeboxbottombox:"typeboxbottombox",missMessage:"missMessage",typebox:"typebox",Iframe:"iframe",slideTags:"slideTags",menuGroup:"menuGroup",totalNum:"session.total",fixed:"fixed",hiddenMsg:"session.hiddenMsg",fixedRefs:"fixedRefs",rebound:"rebound",fixedRefPrefix:"fixedRefPrefix",notification:"notification",inputSuggest:"typeboxConfig.inputSuggest",abTest:"abTest"},{setBottomBox:"ToggleTypeBoxBottomBox",decideIsNeedScrollToBottom:"decideIsNeedScrollToBottom",updateMissMessage:"updateMissMessage",updateFixedState:"updateFixedAction",updateFixedRefs:"UpdateFixedRefs",logSyncMessage:"logSyncMessage"})({computed:{hasSug:function(){var t=this.data.get("inputSuggest")||{},e=t.dynamic||[];return(t.static||[]).length>0||e.length>0}},initData:function(){return{xRefList:[],initHeight:0,laterHeight:0,selfHeight:0,wrapperRef:"pc-component-chatview-wrapper",pageXY:"",scrollTop:""}},attached:function(){var t=this,e=document.body.getBoundingClientRect(),i=this.el.getBoundingClientRect();this.data.set("initHeight",e.height),this.data.set("selfHeight",i.height),this.scrollTimer="",this.initScrollEvent(),this.logInitMessages(),this.resetNum(),this.data.get("fixed")&&(this.scrollToFixedMessage(),setTimeout((function(){t.computeMissMessage()}))),this.watch("totalNum",(function(e){t.data.get("fixed")&&setTimeout((function(){t.computeMissMessage()}))})),this.watch("fixedRefs",(function(e){t.scrollToFixedMessage(),t.computeMissMessage()})),this.watch("inputSuggest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.dynamic||[],n=e.static||[],a=n.length>0||i.length>0;t.data.set("hasSug",a),a&&s.store.dispatch("ChatViewScrollToBottom")}))},components:{"ui-chat-wakeup":c.a,"ui-chat-text":d.a,"ui-chat-base":p.a,"ui-chat-leaveword-card":m.a,"ui-chat-image":f.a,"ui-chat-empty":g.a,"ui-standard-card":w.a,"ui-combined-card":M.a,"ui-base-card":b.a,"ui-tab-card":T.a,"ui-notification-card":C.a,"ui-declare":B.a,"ui-leaveword":j.a,"ui-leavetel":A.a},initScrollEvent:function(){this.touchendInterval=null,this.el.addEventListener("scroll",a()(this.scrollHandle.bind(this),100),!1)},logInitMessages:function(){var t=this;this.data.get("message").forEach((function(e){t.actions.logSyncMessage(e)}))},scrollHandle:function(t){this.updateMissMessage&&this.updateMissMessage()},updateMissMessage:function(){var t=!this.data.get("fixed")&&this.getChatviewToBottomStatus();this.actions.decideIsNeedScrollToBottom(t);var e=this.data.get("emptyRefKey"),i=this.ref(e);(t||i&&i.el&&this.getViewPortStatus(i.el))&&this.actions.updateMissMessage({number:0,hasFirst:!1,index:-1})},getChatviewToBottomStatus:function(){var t=this.el,e=t.getBoundingClientRect(),i=this.ref(this.data.get("wrapperRef"));return(i&&i.getBoundingClientRect()).height-e.height-t.scrollTop<5},getViewPortStatus:function(t,e){var i,n=this.data.get("typebox"),a=t.getBoundingClientRect();try{i=!a.height||e?a.top+2<n.top:a.top<n.top&&a.top+a.height>=n.top}catch(t){}return i},resetNum:function(){var t=this,e=this.data.get("message")||[],i=this.data.get("fixedRefPrefix");e.forEach((function(e,n){e.num=n+1,e.fixed&&t.actions.updateFixedRefs(i+"-"+n)}))},computeMissMessage:function(){var t=this,e=this.data.get("message")||[],i=e.length,n=i;e.forEach((function(e){var i="pc-imlp-component-chatview-"+(e.num-1),a=t.ref(i)&&t.ref(i).el,s=!!a&&t.getViewPortStatus(a,1);a&&s&&(n=e.num)}));var a=i-n;this.actions.updateMissMessage({on:!0,hasFirst:!0,index:n,number:a})},computeMinHeight:function(t){var e=this.data.get("fixedRefs")||[],i=e[e.length-1];i&&this.dispatch("scrollToMessage",i);var n=this.ref(i)&&this.ref(i).el,a=this.el.getBoundingClientRect();if(n){var s=a.height+n.offsetTop;s&&this.data.set("minHeight",Math.abs(s)+"px")}},scrollToFixedMessage:function(){this.computeMinHeight(),s.store.dispatch("ChatViewScrollToBottom")},messages:{reScrollToFixedMessage:function(){this.scrollToFixedMessage(),this.computeMissMessage()}},filters:{highLight:function(t){var e=t.content,i=t.source;if("welcome"!==t.tag){e=(e=e.replace(/(\\n)|(\n)/g,"<br/>")).replace(/(\\r)|(\r)/g,"");var n={},a="msg_format"===this.data.get("abTest");return"service"===i&&a&&(n={em:[""],br:[""],p:[""]}),e=(e=(e=(e=H.a.formatRichText(n,e)).replace(/(<br(\s*\/?)?>)/g,"<br/>")).replace(/(.*)<(p)>(.*?)<\/\2>$/,"$1$3")).replace(/^(<br\/>)+|(<br\/>)+$/g,"")}return e}}})},547:function(t,e,i){"use strict";i.r(e),e.default={}},548:function(t,e,i){"use strict";i.r(e);i(12),i(35),i(10);e.default={filters:{emoji:function(t,e){var i=["微笑","调皮","色","睡","疑问","流泪","汗","晕","撇嘴","惊恐","尴尬","害羞","委屈","大笑","大哭","可爱","再见","偷笑","乖","难过"];return t.replace(/\[(微笑|调皮|色|睡|疑问|流泪|汗|晕|撇嘴|惊恐|尴尬|害羞|委屈|大笑|大哭|可爱|再见|偷笑|乖|难过)\]/g,(function(t,e){return'<i class="imlp-component-text-emoji imlp-component-text-icon-'+(i.indexOf(e)+1)+'"></i>'}))}}}},549:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({savatar:"service.avatar",uavatar:"user.avatar",cardShow:"session.cardShow"},{})({computed:{chatIn:function(){var t=this.data.get("source");return"service"==t||"system"==t}},initData:function(){return{hasCard:!1}},handleResend:function(){var t=this.data.get("msgid");"1"===this.data.get("sendState")&&n.store.dispatch("manualResendMessage",t)},messages:{broadcastCardInfo:function(){this.data.set("hasCard",!0)}}})},550:function(t,e,i){"use strict";i.r(e);i(12),i(53),i(10),i(55);var n=i(66);e.default={attached:function(){var t=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);this.data.set("isIOS",t)},submit:function(t){t.preventDefault();var e=t.target;if(-1===(e.className||"").indexOf("imlp-component-chatviewleaveword_submit_disabled")){var i=e.parentNode,n=i.querySelector("select"),a=i.querySelector("input");this.validateInput(n.value,a.value)?(this.dispatch("chat-action",{type:"leaveWord",value:{type:n.value,content:a.value}}),this.disabledBtn(e,n,a)):this.dispatch("chat-action",{type:"toast",value:{text:"输入错误"}})}},disabledBtn:function(t,e,i){t.innerHTML="已提交",t.className+=" imlp-component-chatviewleaveword_submit_disabled",e.disabled=!0,i.disabled=!0},validateInput:function(t,e){return e=e.trim(),Object(n.a)(t,e)}}},551:function(t,e,i){"use strict";i.r(e);i(8);var n=i(0);e.default=n.connect.san({imageList:"imageList",savatar:"service.avatar",uavatar:"user.avatar"},{updateImage:"UpdateImage",updatePreview:"UpdatePreviewAction",kefuImageClick:"kefuImageClick"})({initData:function(){return{loaded:!1,imageWidth:0,imageHeight:0,outImageHeight:0,outImageWidth:0,picReadedRef:"imlp-chatview-pic-readed-ref",progress:0}},handleStatus:function(){var t=this.data.get("msgid"),e=this.data.get("isRead"),i=this.data.get("imageList"),a=this.data.get("content");-1===i[a.uuid].status?n.store.dispatch("reUploadImg",a.uuid):"1"===e&&n.store.dispatch("manualResendMessage",t)},attached:function(){var t=this,e=t.data.get("content")||{},i=t.data.get("history")||!1,n=t.data.get("imageList")||{},a=e.image_url;if(a){var s=new Image;s.onload=function(){var e=this.naturalWidth,n=this.naturalHeight,a=Math.max(e,n);if(a>280){var s=Math.min(e,n);s=s/a*280,a=280,e>n?(e=a,n=s):(e=s,n=a)}t.data.set("loaded",!0),t.data.set("imageWidth",e),t.data.set("imageHeight",n),i&&setTimeout((function(){t.dispatch("reScrollToFixedMessage")}))},s.src=a}var o=n[e.uuid]||{};if(o){var c=o.width,r=o.height,d=Math.max(c,r);if(d>280){var l=Math.min(c,r);l=l/d*280,d=280,c>r?(c=d,r=l):(c=l,r=d)}t.data.set("outImageHeight",r),t.data.set("outImageWidth",c)}},preview:function(t,e){"url"===e&&this.actions.kefuImageClick(t),this.actions.updatePreview({on:!0,src:t})},loadHandler:function(t,e){n.store.dispatch("resRetry",{event:t,isRetrySuccess:e})}})},552:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({typebox:"typebox"},{updateMissMessage:"updateMissMessage"})({attached:function(){this.dispatch("setFirstMissMessage",this.data.get("index"))},getDistanceToTop:function(){var t=this.el.getBoundingClientRect(),e=this.owner.el.getBoundingClientRect();return t.top-e.top}})},571:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(750),s=i.n(a);e.default=n.connect.san({},{})({initData:function(){return{spread:{status:0},fold:0,showWidgets:[],heightComputed:!1}},attached:function(){this.dispatch("broadcastCardInfo")},components:{"widget-tabs":s.a}})},572:function(t,e,i){"use strict";i.r(e);i(8);var n=i(0),a=(i(30),i(134)),s=i.n(a);e.default=n.connect.san({},{})({initData:function(){return{active:-1,detail:{}}},attached:function(){this.setTab()},components:{"ui-base-card":s.a},setTab:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.data.set("active",-1),setTimeout((function(){var i=(t.data.get("data")[e].value||{}).content||{};t.data.set("active",e),t.data.set("detail",i)}))},change:function(t,e){this.data.get("active")!==e&&this.setTab(e)}})},573:function(t,e,i){"use strict";i.r(e);var n=i(173),a=i.n(n),s=i(0);e.default=s.connect.san({notificationMap:"notificationMap"},{updateNotification:"UpdateNotification"})({initData:function(){return{limitMap:{doctor:2},visible:!1}},components:{"widget-notification":a.a},attached:function(){this.render()},render:function(){var t=this.data,e=t.get("content.category"),i=t.get("limitMap")[e];if(i&&(this.actions.updateNotification({type:e}),t.get("notificationMap")[e]>i))return t.set("visible",!1),void this.dispatch("hidden-msg");t.set("visible",!0)}})},574:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({},{showmask:"setMask"})({showMask:function(){this.actions.showmask({show:!0,childcomponent:"declare"})}})},575:function(t,e,i){"use strict";i.r(e);i(10),i(18),i(55);var n=i(0),a=i(66),s=i(41),o=i(1);e.default=n.connect.san({preset:"presetMessage",connected:"session.connected",pageTitle:"pageTitle",xyl:"xyl"},{addMessage:"AddMessageToChatView"})({computed:{invitewords:function(){var t=this.data.get("pageTitle");return this.data.get("connected")?"请填写一下信息，我们会尽快和您联系：":"感谢您对"+t+"的关注！当前客服人员不在线，请填写一下信息，我们会尽快和您联系。"}},initData:function(){return{isError:!1}},attached:function(){},submit:function(t){t.preventDefault();var e=t.target;if(-1===(e.className||"").indexOf("submit-disabled")){var i=e.parentNode.parentNode,n=i.querySelector(".tel-input");if(this.validateInput(n.value)){var a=s.a.getFiltedPresetMsg()||"",c=i.querySelector(".name-input").value,r=i.querySelector(".leaveword-textarea").value,d=n.value,l="您好，".concat(a?"我想咨询"+a+"，":"","以下是我的个人信息：姓名：").concat(c,"，手机号码：").concat(d,"，咨询内容：").concat(r,"。");this.dispatch("chat-action",{type:"leaveWord",value:{type:"phone",content:l,tag:"leaveword"}}),this.actions.addMessage({type:o.e.TEXT,content:l,source:"user"}),this.disabledBtn(e,n)}else this.data.set("isError",!0)}},disabledBtn:function(t,e){t.innerHTML="已提交",t.className+=" submit-disabled",e.disabled=!0},validateInput:function(t){return t=t.trim(),Object(a.a)("phone",t)},clearError:function(t){t.preventDefault(),t.target.parentNode.querySelector(".tel-input").value="",this.data.set("isError",!1)}})},576:function(t,e,i){"use strict";i.r(e);i(10),i(55);var n=i(0),a=i(66),s=i(1);e.default=n.connect.san({},{addMessage:"AddMessageToChatView"})({initData:function(){return{isError:!1}},attached:function(){},submit:function(t){t.preventDefault();var e=t.target;if(-1===(e.className||"").indexOf("submit-disabled")){var i=e.parentNode.querySelector("input");if(this.validateInput(i.value)){var n="您好，我的电话是"+i.value+"， 请您尽快和我联系。";this.dispatch("chat-action",{type:"leaveWord",value:{type:"phone",content:n,tag:"leavetel"}}),this.actions.addMessage({type:s.e.TEXT,content:n,source:"user"}),this.disabledBtn(e,i)}else this.data.set("isError",!0)}},disabledBtn:function(t,e){t.innerHTML="已提交",t.className+=" submit-disabled",e.disabled=!0},validateInput:function(t){return t=t.trim(),Object(a.a)("phone",t)},clearError:function(t){t.preventDefault(),t.target.parentNode.querySelector(".leavetel-input").value="",this.data.set("isError",!1)}})},577:function(t,e,i){"use strict";i.r(e);i(8),i(17),i(55),i(26);var n=i(0),a=i(30),s=i(756),o=i.n(s),c=i(757),r=i.n(c),d=i(175),l=i.n(d),p=i(5),u=i(176),m=i.n(u),h=i(280),f=i.n(h),v=i(1);n.store.addAction("UpdateTypeBoxInput",(function(t,e){e.getState,e.dispatch;return Object(a.builder)().set("typeboxtext",t)})),n.store.addAction("ToggleTypeBoxBottomBox",(function(t,e){e.getState,e.dispatch;return Object(a.builder)().set("typeboxbottombox",t)})),e.default=n.connect.san({text:"typeboxtext",landpageurl:"landpageurl",contactNumber:"contactNumber",sendImage:"sendImage",bottombox:"typeboxbottombox",appid:"appid",iframe:"iframe",sessionState:"session.state",presetMessage:"presetMessage",feedbackURL:"feedbackURL",xhinfo:"xhinfo",blockSession:"review",needBackXcx:"needBackXcx",clientSourceExt:"clientSourceExt",baozhangUrl:"baozhangUrl",showBaozhangInfo:"showBaozhangInfo",robot:"session.robot"},{updateText:"UpdateTypeBoxInput",setBottomBox:"ToggleTypeBoxBottomBox",send:"SendMessage",connectNet:"ConnectNet",setMask:"setMask",updateFixedState:"updateFixedAction",updateIsNeedScrollToBottom:"decideIsNeedScrollToBottom",triggerXhRule:"triggerXhRule",logPresetMsg:"logPresetMsg",updateCardShow:"updateCardShow",updateInputTrack:"updateInputTrack",inputFocus:"inputFocus"})({components:{"ui-typebox-emoji":o.a,"ui-uploader":r.a,"ui-chat-miss-message-tip":l.a,"ui-sugslider":m.a,"logo-emoji":f.a},initData:function(){return{bottombox:"emoji",emojiBoxRefKey:"imlp-component-emoji-box",emojiBtnRefKey:"imlp-component-emoji-btn",inputRefKey:"pc-imlp-component-typebox-input",presetWord:"",buttonClicked:!1,sended:!1,focused:!1,defaultPlaceholder:"请您输入...",placeholder:"请您输入...",plusBoxItemPlaceholderClass:"imlp-component-typebox-plus-box-item-order-999",textChanged:!1,filterRefKey:"typebox-tool-filter",sessionClosedState:p.a.stateMap.closed,quickInput:{}}},attached:function(){var t=this.data.get("inputRefKey"),e=this.data.get("filterRefKey");this.inputElem=this.ref(t),this.filterElem=this.ref(e),this.autoTextarea(this.inputElem),this.initPresetWord(),this.dispatch("setTypeboxInfo"),this.scrollToEnd();var i=this;this.watch("text",(function(t){this.data.set("textChanged",!0),i.actions.updateText(t)}))},updateFilterState:function(){var t=this.filterElem.checked;this.actions.updateCardShow(!t),this.dispatch("scrollHandle")},switchToManual:function(t){this.actions.send({source:"user",type:v.e.TEXT,content:t,trigger:"typebox"})},hideEmoji:function(){"emoji"===this.data.get("bottombox")&&this.toggleBox("")},initPresetWord:function(){var t=this.data.get("presetWord"),e=(this.data.get("textChanged"),this.data.get("presetMessage")||{}),i=e.enabled,n=e.message,a=e.from;i&&n&&(t=n,this.data.set("presetWord",t),this.data.set("placeholder",t),this.actions.updateText(t),this.actions.logPresetMsg({type:"preset_show_".concat(a),content:encodeURIComponent(t)}),this.actions.updateFixedState(!0),this.actions.updateIsNeedScrollToBottom(!1))},renderInput:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.inputElem.value=t,this.updateText(),e&&this.data.set("quickInput",{tag:e,value:t})},toggleBox:function(t){if("input"===t)this.actions.setBottomBox("input"),this.scrollToEnd();else{var e=this.inputElem,i=this.data.get("bottombox");i===t?(clearInterval(this.imlpcid),this.actions.setBottomBox("input"),e.focus(),this.scrollToEnd()):("emoji"===i&&"plus"===t?this.actions.setBottomBox(""):this.actions.setBottomBox(t),e.blur(),this.scrollToEnd())}},scrollToEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=this;setTimeout((function(){e.el.scrollIntoView&&e.el.scrollIntoView(!0),e.el.scrollIntoViewIfNeeded&&e.el.scrollIntoViewIfNeeded()}),t)},keydown:function(t){13===t.keyCode&&(this.send(t,!0),this.focus())},getEmojiBoxComp:function(){var t=this.data.get("emojiBoxRefKey");return this.ref(t)},getEmojiBtnElem:function(){var t=this.data.get("emojiBtnRefKey");return this.ref(t)},inputfocus:function(){this.data.get("blockSession")||this.actions.connectNet({source:"focus"}),this.actions.inputFocus("typebox"),this.actions.updateInputTrack({start:{ts:(new Date).getTime(),len:this.data.get("text").length}}),this.scrollToEnd()},inputBlur:function(){this.actions.updateInputTrack({end:{ts:(new Date).getTime(),len:this.data.get("text").length}}),this.timerId&&(clearInterval(this.timerId),this.timerId=null)},updateText:function(){this.actions.updateText(this.inputElem.value.trim()),this.actions.updateInputTrack({middle:{ts:(new Date).getTime(),len:this.inputElem.value.trim().length}})},send:function(t,e){var i=this.inputElem,n=this.data.get("sended"),a=this.data.get("defaultPlaceholder"),s=this.data.get("text"),o=this.data.get("presetWord"),c=(this.data.get("presetMessage")||{}).from,r=this.data.get("buttonClicked"),d=this.data.get("textChanged");s&&!r&&this.data.set("buttonClicked",!0),(13===t.keyCode||e)&&(13===t.keyCode&&t.preventDefault(),""===s.trim()&&""===o.trim()||((""===s.trim()&&""!==o.trim()||!d&&""!==s.trim()&&""!==o.trim())&&(s=o.trim(),n||(!0,this.data.set("sended",!0),this.data.set("presetWord",""),this.data.set("placeholder",a),c&&this.data.set("quickInput",{tag:c,value:encodeURIComponent(s)}),c&&this.actions.logPresetMsg({type:"preset_send_".concat(c),content:encodeURIComponent(s)}))),this.actions.updateText(""),i.innerHTML="",i.value="",this.actions.setBottomBox(""),this.actions.send({source:"user",type:v.e.TEXT,content:s,trigger:"input",sourceTag:this.data.get("quickInput").tag}),this.data.set("quickInput",{}),i.focus()))},autoTextarea:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:148;this.input=t,this.maxHeight=i,this.minHeight=parseInt(getComputedStyle(t,null).height,10)},openSessionClosedTip:function(){this.actions.setMask({show:!0,childcomponent:"session-closure"})},focus:function(){var t=this.data.get("inputRefKey");this.ref(t)&&this.ref(t).focus(),this.actions.setBottomBox("")},messages:{renderInput:function(t){this.renderInput(t.value)},focusInput:function(){this.focus()}}})},578:function(t,e,i){"use strict";i.r(e);i(55),i(12),i(42);var n=i(0),a=i(170),s=i.n(a),o=i(3);e.default=n.connect.san({text:"typeboxtext"},{updateText:"UpdateTypeBoxInput",setBottomBox:"ToggleTypeBoxBottomBox"})({initData:function(){return{currentSlide:0}},attached:function(){for(var t=this,e=this.el.querySelectorAll(".imlp-component-typeboxemoji-slide-item"),i=e.length,n=this.actions.updateText,a=function(i){var a=e[i];a.addEventListener("click",(function(){var e=t.data.get("text").trim();if(a.classList.contains("imlp-component-typeboxemoji-slide-item-delete")){var i=/\[(微笑|调皮|色|睡|疑问|流泪|汗|晕|撇嘴|惊恐|尴尬|害羞|委屈|大笑|大哭|可爱|再见|偷笑|乖|难过)\]$/.exec(e);i&&(n(e.slice(0,i.index)),t.dispatch("renderInput",e.slice(0,i.index)))}else{var s=o.a.getDataset(a).text;n(e+s),t.dispatch("renderInput",e+s),t.dispatch("focusInput")}}))},c=0;c<i;c++)a(c);var r=this.data;new s.a(this.el,{startSlide:0,speed:400,auto:!1,continuous:!1,disableScroll:!1,stopPropagation:!1,callback:function(t,e){},transitionEnd:function(t,e){r.set("currentSlide",t)}})}})},579:function(t,e,i){"use strict";i.r(e);var n=i(278),a=i.n(n),s=i(24),o=i.n(s),c=i(14),r=i.n(c),d=(i(17),i(26),i(42),i(54),i(72),i(6),i(71),i(63),i(86),i(12),i(53),i(19),i(20),i(10),i(25),i(318),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343),i(344),i(8),i(0)),l=i(80),p=i.n(l),u=i(279),m=i.n(u),h=i(1);e.default=d.connect.san({imageList:"imageList"},{send:"SendMessage",addMessageToChatView:"AddMessageToChatView",updateImage:"UpdateImage",setBottomBox:"ToggleTypeBoxBottomBox"})({components:{"logo-uploader":m.a},initData:function(){return{data:[],max:9,maxSize:51200,maxUploadSize:3,typeArray:["jpeg","jpg","png","gif"],uploadUrl:"/imlp/upload",imgNumber:0,maxSideRequired:1800,maxSideShowRequired:180,iframeName:"uploadFrame",uploadFormRefKey:"uploadForm",supportFiles:!1,hiddenInputRefKey:"hiddenInput"}},attached:function(){var t=this.ref(this.data.get("hiddenInputRefKey"));this.data.set("supportFiles",!o()(t.files))},getUuid:function(){var t=this.data.get("imgNumber");return this.data.set("imgNumber",t+1),"img"+(new Date).getTime()+t},triggerInput:function(){this.ref("uploadElem").click()},handleInputChange:function(){var t=this,e=this,i=this.data,n=(i.get("typeArray"),parseInt(i.get("maxSize"),10),this.ref("uploadElem")),a=[],s=Array.prototype.slice.call(n.files);if(this.checkFiles(s)){var o=s.map((function(i){return t.transformFileToDataUrl(i).then((function(n){i.uuid=e.getUuid(),i.width=n.width,i.height=n.height,i.drawWidth=n.drawWidth,i.drawHeight=n.drawHeight;var s={status:0,uuid:i.uuid,progress:0,tempSrc:n.src,width:n.width,height:n.height,drawWidth:n.drawWidth,drawHeight:n.drawHeight};t.actions.updateImage(s),t.actions.addMessageToChatView({source:"user",type:h.e.IMAGE,content:s,trigger:"input"}),a.push({file:i,dataUrl:n.src,uuid:i.uuid})}))}));Promise.all(o).then((function(){var e=!0;window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(e=!1),t.uploadGen=t.uploadGenerator(a);var i=t.uploadGen.next();t.ref("uploadElem").value=null,i.value.map((function(i){e?t.processData(i):t.processFormDataForFile(i)}))}))}else d.store.dispatch("ShowToast",{text:"图片类型不对或者尺寸太大"})},checkFiles:function(t){var e=this.data,i=this.ref("uploadElem"),n=e.get("typeArray"),a=parseInt(e.get("maxSize"),10),s={typeError:!1,sizeError:!1};return t.forEach((function(t){-1===n.indexOf(t.type.split("/")[1])&&(s.typeError=!0),t.size>1024*a&&(s.sizeError=!0)})),!s.typeError&&!s.sizeError||(i.value=null,!1)},transformFileToDataUrl:function(t){var e=this;return new Promise((function(i,n){e.fileToDataURL(t,(function(t){i(t)}))}))},uploadGenerator:r.a.mark((function t(e){var i,n,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.data.get("maxUploadSize"),!((n=e.length)>i)){t.next=20;break}a=[],s=0;case 5:if(!(s<n)){t.next=18;break}if(!(s<i)){t.next=13;break}if(a.push(e[s]),s!==i-1){t.next=11;break}return t.next=11,a;case 11:t.next=15;break;case 13:return t.next=15,[e[s]];case 15:s++,t.next=5;break;case 18:t.next=22;break;case 20:return t.next=22,e.map((function(t){return t}));case 22:case"end":return t.stop()}}),t,this)})),processData:function(t){var e,i=t.dataUrl,n=t.file;try{e=this.dataURLtoBlob(i)}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var a=new window.BlobBuilder;a.append(arrayBuffer),e=a.getBlob(n.type)}else d.store.dispatch("ShowToast",{text:"版本过低，不支持上传图片"})}t.blob=e,this.processFormDataForBlob(t)},processFormDataForBlob:function(t){var e=new FormData,i=t.file,n=t.blob;e.append("type",i.type),e.append("size",n.size),e.append("name",i.name),e.append("lastModifiedDate",i.lastModifiedDate),e.append("file",n),t.formData=e,this.uploadImg(t)},processFormDataForFile:function(t){var e=new FormData,i=t.file;e.append("type",i.type||'image/jpeg"'),e.append("size",i.size),e.append("name",i.name),e.append("lastModifiedDate",i.lastModifiedDate||(new Date).getTime()),e.append("file",i),t.formData=e,this.uploadImg(t)},uploadImg:function(t){var e=this;d.store.dispatch("UploadImg",{uploadUrl:"/imlp/upload",data:t,handler:function(){var t=e.uploadGen.next();if(!t.done){var i=!0;window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(i=!1),t.value.map((function(t){i?e.processData(t):e.processFormDataForFile(t)}))}}})},dataURLtoBlob:function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),a=new Uint8Array(n),s=0;s<e.length;s++)a[s]=e.charCodeAt(s);return new Blob([n],{type:i})},fileToDataURL:function(t,e){var i,n=this;p.a.getData(t,(function(){p.a.getAllTags(this),i=p.a.getTag(this,"Orientation")}));var a=this,s=this.data.get("maxSideRequired"),o=this.data.get("maxSideShowRequired"),c=new FileReader;c.onload=function(t){a.preloadImage(t.target.result,(function(){var a,c,r=this.naturalWidth,d=this.naturalHeight;this.naturalWidth>this.naturalHeight&&this.naturalWidth>s?d=(r=s)*this.naturalHeight/this.naturalWidth:this.naturalHeight>this.naturalWidth&&this.naturalHeight>s&&(r=(d=s)*this.naturalWidth/this.naturalHeight);var l=document.createElement("canvas"),p=l.getContext("2d");l.width=r,l.height=d,p.drawImage(this,0,0,r,d);var u=null;if(navigator.userAgent.match(/iphone/i)){if(""!=i&&1!=i)switch(i){case 6:n.rotateImg(this,"left",l);break;case 8:n.rotateImg(this,"right",l);break;case 3:n.rotateImg(this,"right",l),n.rotateImg(this,"right",l)}u=l.toDataURL("image/jpeg")}else if(navigator.userAgent.match(/Android/i))u=t.target.result;else{if(""!=i&&1!=i)switch(i){case 6:n.rotateImg(this,"left",l);break;case 8:n.rotateImg(this,"right",l);break;case 3:n.rotateImg(this,"right",l),n.rotateImg(this,"right",l)}u=l.toDataURL("image/jpeg")}l.width>l.height&&l.width>o?c=(a=o)*l.height/l.width:l.height>l.width&&l.height>o&&(a=(c=o)*l.width/l.height);var m={width:l.width,height:l.height,drawWidth:a,drawHeight:c,src:u};e(m)}))},c.readAsDataURL(t)},rotateImg:function(t,e,i){if(null!=t){var n=t.height,a=t.width,s=2;null==s&&(s=0),"right"==e?++s>3&&(s=0):--s<0&&(s=3);var o=90*s*Math.PI/180,c=i.getContext("2d");switch(s){case 0:i.width=a,i.height=n,c.drawImage(t,0,0);break;case 1:i.width=n,i.height=a,c.rotate(o),c.drawImage(t,0,-n);break;case 2:i.width=a,i.height=n,c.rotate(o),c.drawImage(t,-a,-n);break;case 3:i.width=n,i.height=a,c.rotate(o),c.drawImage(t,-a,0)}}},preloadImage:function(t,e){var i=new Image;i.onload=a()(e,i),i.src=t},formUpload:function(){var t,e=this,i=this.ref(this.data.get("uploadFormRefKey")),n=document.createElement("iframe"),a=this.data.get("iframeName"),s=this.data.get("uploadUrl");n.setAttribute("id",a),n.setAttribute("name",a),n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("frameborder","0"),i.parentNode.appendChild(n);var o=document.getElementById(a),c=function n(){o.detachEvent?o.detachEvent("onload",n):o.removeEventListener&&o.removeEventListener("load",n,!1),o.contentDocument?t=o.contentDocument.body.textContent||o.contentDocument.body.innerHTML:o.contentWindow?t=o.contentWindow.body.textContent||o.contentWindow.document.body.innerHTML:o.document&&(t=o.document.body.textContent||o.document.body.innerHTML);try{t=JSON.parse(t)}catch(e){t={}}0===t.status&&t.content&&e.preloadImage(t.content,(function(){var i,n,a=this.naturalWidth,s=this.naturalHeight,o=e.data.get("maxSideShowRequired");a>s&&a>o?n=(i=o)*s/a:s>a&&s>o&&(i=(n=o)*a/s);var c={status:1,uuid:e.getUuid(),progress:100,tempSrc:t.content,width:a,height:s,drawWidth:i,drawHeight:n};e.actions.updateImage(c),e.actions.addMessageToChatView({source:"user",type:h.e.IMAGE,content:c,trigger:"input"}),e.actions.send({source:"user",type:h.e.IMAGE,content:{image_url:t.content,image_width:a,image_height:s,thumb_url:t.content},trigger:"input",isMsgHidden:!0})})),setTimeout((function(){i.parentNode.removeChild(o)}),200)};o.addEventListener?o.addEventListener("load",c,!0):o.attachEvent&&o.attachEvent("onload",c),i.setAttribute("target",a),i.setAttribute("action",s),i.setAttribute("method","post"),console.log("clicked"),i.submit()}})},584:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(134),s=i.n(a),o=i(132),c=i.n(o);e.default=n.connect.san({},{})({initData:function(){return{}},attached:function(){},components:{"ui-base-card":s.a,"ui-text-ellipise-box":c.a},operate:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&(t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()),e)){e.mat=e.mat||{},e.mat.cardType=e.mat.cardType||this.data.get("type");var a=n?"":e.text||i,s="Recommend";this.dispatch("operate",{item:e,type:s,history:a})}}})},585:function(t,e,i){"use strict";i.r(e);i(52),i(6);var n=i(0);e.default=n.connect.san({feedbackURL:"feedbackURL",contactNumber:"contactNumber"},{addMessage:"AddMessageToChatView",showmask:"setMask"})({computed:{contacts:function(){var t=this.data.get("presetContact"),e=this.data.get("feedbackURL"),i=this.data.get("contactNumber");return t.filter((function(t){return!("feedback"===t.type&&!e||"consult"===t.type&&!i)}))}},initData:function(){return{presetContact:[{type:"feedback",text:"评价",style:"pc-icon-evaluation"},{type:"leavetel",text:"留电",style:"pc-icon-leave-tel"},{type:"leaveword",text:"留言",style:"pc-icon-leave-message"},{type:"consult",text:"电话咨询",style:"pc-icon-consult"}]}},operate:function(t,e){switch(t&&(t.preventDefault(),t.stopPropagation()),e){case"feedback":this.feedback();break;case"leavetel":case"leaveword":this.leaveHandler(e);break;case"consult":this.showmask()}},showmask:function(){this.actions.showmask({show:!0,childcomponent:"qrcode"})},leaveHandler:function(t){this.actions.addMessage({type:t,source:"system"})},feedback:function(){var t=this.data.get("feedbackURL");this.dispatch("chat-action",{type:"Contact",value:{type:"url",value:t}})}})},586:function(t,e,i){"use strict";i.r(e);i(18);var n=i(0),a=(i(30),i(761)),s=i.n(a),o=i(762),c=i.n(o),r=i(763),d=i.n(r),l=i(764),p=i.n(l),u=i(765),m=i.n(u),h=i(766),f=i.n(h);e.default=n.connect.san({show:"mask.show",child:"mask.childcomponent",data:"mask.data"},{toggle:"MaskToggle",set:"setMask"})({initData:function(){var t=n.store.getState("header.title"),e=n.store.getState("im_type");return{menu:[{action:"iframe",text:"页面须知",url:"/imlp/static?page=1"},{action:"iframe",text:"服务声明",url:"/imlp/static?page=2&imType=".concat(e,"&name=").concat(t)}]}},components:{"ui-declare":s.a,"ui-qrcode":c.a,"ui-qrcode-scaled":d.a,"ui-session-closure":p.a,"ui-detention":m.a,"ui-captcha":f.a},toggle:function(){this.actions.toggle({})},set:function(){this.actions.set({})},attached:function(){this.watch("show",(function(t){var e=t?"add":"remove",i="layout-fixed";document.documentElement.classList[e](i),document.body.classList[e](i)}))}})},587:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(13);e.default=n.connect.san({appid:"appid",imType:"im_type",name:"title"},{masktoggle:"MaskToggle"})({initData:function(){return{text:""}},toggle:function(){this.actions.masktoggle({})},attached:function(){var t=this.data.get("imType");this.data.set("imName",a.a.getImName(t))}})},588:function(t,e,i){"use strict";i.r(e);var n=i(40),a=i.n(n),s=i(0),o=i(133),c=i.n(o);e.default=s.connect.san({contactNumber:"contactNumber"},{masktoggle:"MaskToggle"})({components:{"widgets-ui-qrcode":c.a},computed:{phone:function(){var t=this.data.get("data")||{},e=this.data.get("contactNumber"),i=t.phone||e;return"object"===a()(i)&&(i=i.number),i}},toggle:function(){this.actions.masktoggle({})}})},589:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(133),s=i.n(a);e.default=n.connect.san({},{masktoggle:"MaskToggle"})({components:{"widgets-ui-qrcode":s.a},toggle:function(){this.actions.masktoggle({})}})},590:function(t,e,i){"use strict";i.r(e);var n=i(0);e.default=n.connect.san({},{masktoggle:"MaskToggle"})({initData:function(){return{text:""}},hide:function(){this.actions.masktoggle({})},refresh:function(){window.location.reload()}})},591:function(t,e,i){"use strict";i.r(e);i(17),i(8);var n=i(0);e.default=n.connect.san({smartprogram:"smartprogram",imType:"im_type",ssid:"ssid",historySeq:"historySeq"},{masktoggle:"MaskToggle",detentionAction:"detentionAction",leave:"NetTaskleave"})({initData:function(){return{text:""}},attached:function(){this.actions.detentionAction("show")},hide:function(){this.actions.detentionAction("hide"),this.actions.masktoggle({});var t="#back"+(new Date).getTime(),e={title:"title",url:t};window.history.pushState(e,"title",t)},confirm:function(){var t=this;this.actions.masktoggle({}),this.leave(),setTimeout((function(){t.back()}),300)},leave:function(){var t=this.data.get("imType"),e=this.data.get("ssid");this.actions.leave({im_type:t,ssid:e})},back:function(){for(var t=this.data.get("historySeq"),e=history.length-t,i=0;i<e;i++)history.back()}})},592:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(767),s=i.n(a);e.default=n.connect.san({},{})({components:{"widget-captcha":s.a}})},593:function(t,e,i){"use strict";i.r(e);i(55);var n=i(0);e.default=n.connect.san({captcha:"anti.captcha.image",base64:"anti.captcha.base64",token:"anti.captcha.token",antiErrMsg:"anti.captcha.errMsg"},{getCaptcha:"getCaptcha",checkCaptcha:"checkCaptcha",masktoggle:"MaskToggle",showToast:"ShowToast",antiBlock:"antiBlock",antiLog:"antiLog"})({initData:function(){return{code:"",inputRef:"imlp-widget-captcha-input",errMsgMap:{empty:"答案为空,请重新输入",length:"验证码长度不足4位,请重新输入",default:"答案输入异常,请重新输入"}}},attached:function(){this.inputElem=this.ref(this.data.get("inputRef")),this.getCaptcha(),this.watch("code",(function(t){t&&this.data.set("errMsg","")})),this.watch("antiErrMsg",(function(t){t&&this.data.set("errMsg",t)}))},inputHandle:function(){this.data.set("code",this.inputElem.value.trim())},keydown:function(t){13===t.keyCode&&this.confirm()},getCaptcha:function(){this.actions.getCaptcha(),this.actions.antiLog("captcha_refresh")},confirm:function(){var t=this.invalidInput(this.inputElem.value);t?this.errHandle(t):this.submit(),this.clearInput()},submit:function(){this.actions.antiLog("captcha_check"),this.actions.checkCaptcha(this.inputElem.value)},invalidInput:function(t){return t?"":"empty"},errHandle:function(t){var e=this.data.get("errMsgMap"),i=e[t]||e.default;this.data.set("errMsg",i)},clearInput:function(){this.inputElem.innerHTML="",this.inputElem.value=""},cancel:function(){this.actions.masktoggle({}),this.actions.antiBlock(),this.actions.antiLog("captcha_cancel")}})},68:function(t,e){t.exports=_sdk_cfd795},726:function(t,e,i){var n=i(2);i(1170);var a=i(1171),s=i(533).default;t.exports=i(533),t.exports.default=n(s,a,[])},727:function(t,e,i){var n=i(2);i(1172);var a=i(1173),s=i(534).default;t.exports=i(534),t.exports.default=n(s,a,[])},729:function(t,e,i){var n=i(2);i(1184);var a=i(1185),s=i(540).default;t.exports=i(540),t.exports.default=n(s,a,[])},730:function(t,e,i){var n=i(2);i(1186);var a=i(1187),s=i(541).default;t.exports=i(541),t.exports.default=n(s,a,[])},731:function(t,e,i){var n=i(2);i(1190);var a=i(1191),s=i(543).default;t.exports=i(543),t.exports.default=n(s,a,[])},732:function(t,e,i){var n=i(2);i(1192);var a=i(1193),s=i(544).default;t.exports=i(544),t.exports.default=n(s,a,[])},733:function(t,e,i){var n=i(2);i(1194);var a=i(1195),s=i(545).default;t.exports=i(545),t.exports.default=n(s,a,[])},734:function(t,e,i){var n=i(2);i(1196);var a=i(1197),s=i(546).default;t.exports=i(546),t.exports.default=n(s,a,[])},735:function(t,e,i){var n=i(2);i(1198);var a=i(1199),s=i(547).default;t.exports=i(547),t.exports.default=n(s,a,[])},736:function(t,e,i){var n=i(2);i(1200);var a=i(1201),s=i(548).default;t.exports=i(548),t.exports.default=n(s,a,[])},737:function(t,e,i){var n=i(2);i(1202);var a=i(1203),s=i(549).default;t.exports=i(549),t.exports.default=n(s,a,[])},738:function(t,e,i){var n=i(2);i(1204);var a=i(1205),s=i(550).default;t.exports=i(550),t.exports.default=n(s,a,[])},739:function(t,e,i){var n=i(2);i(1206);var a=i(1207),s=i(551).default;t.exports=i(551),t.exports.default=n(s,a,[])},740:function(t,e,i){var n=i(2);i(1208);var a=i(1209),s=i(552).default;t.exports=i(552),t.exports.default=n(s,a,[])},749:function(t,e,i){var n=i(2);i(1246);var a=i(1247),s=i(571).default;t.exports=i(571),t.exports.default=n(s,a,[])},750:function(t,e,i){var n=i(2);i(1248);var a=i(1249),s=i(572).default;t.exports=i(572),t.exports.default=n(s,a,[])},751:function(t,e,i){var n=i(2);i(1250);var a=i(1251),s=i(573).default;t.exports=i(573),t.exports.default=n(s,a,[])},752:function(t,e,i){var n=i(2);i(1252);var a=i(1253),s=i(574).default;t.exports=i(574),t.exports.default=n(s,a,[])},753:function(t,e,i){var n=i(2);i(1254);var a=i(1255),s=i(575).default;t.exports=i(575),t.exports.default=n(s,a,[])},754:function(t,e,i){var n=i(2);i(1256);var a=i(1257),s=i(576).default;t.exports=i(576),t.exports.default=n(s,a,[])},755:function(t,e,i){var n=i(2);i(1258);var a=i(1259),s=i(577).default;t.exports=i(577),t.exports.default=n(s,a,[])},756:function(t,e,i){var n=i(2);i(1260);var a=i(1261),s=i(578).default;t.exports=i(578),t.exports.default=n(s,a,[])},757:function(t,e,i){var n=i(2);i(1262);var a=i(1263),s=i(579).default;t.exports=i(579),t.exports.default=n(s,a,[])},758:function(t,e,i){var n=i(2);i(1276);var a=i(1277),s=i(584).default;t.exports=i(584),t.exports.default=n(s,a,[])},759:function(t,e,i){var n=i(2);i(1278);var a=i(1279),s=i(585).default;t.exports=i(585),t.exports.default=n(s,a,[])},760:function(t,e,i){var n=i(2);i(1280);var a=i(1281),s=i(586).default;t.exports=i(586),t.exports.default=n(s,a,[])},761:function(t,e,i){var n=i(2);i(1282);var a=i(1283),s=i(587).default;t.exports=i(587),t.exports.default=n(s,a,[])},762:function(t,e,i){var n=i(2);i(1284);var a=i(1285),s=i(588).default;t.exports=i(588),t.exports.default=n(s,a,[])},763:function(t,e,i){var n=i(2);i(1286);var a=i(1287),s=i(589).default;t.exports=i(589),t.exports.default=n(s,a,[])},764:function(t,e,i){var n=i(2);i(1288);var a=i(1289),s=i(590).default;t.exports=i(590),t.exports.default=n(s,a,[])},765:function(t,e,i){var n=i(2);i(1290);var a=i(1291),s=i(591).default;t.exports=i(591),t.exports.default=n(s,a,[])},766:function(t,e,i){var n=i(2);i(1292);var a=i(1293),s=i(592).default;t.exports=i(592),t.exports.default=n(s,a,[])},767:function(t,e,i){var n=i(2);i(1294);var a=i(1295),s=i(593).default;t.exports=i(593),t.exports.default=n(s,a,[])}},[[1382,1,0]]]);